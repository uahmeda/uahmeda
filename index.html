<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>У Ахмеда</title>
    <link rel="icon" type="image/png" href="img/img/favicon.png">
    <!-- Подключаем Google Fonts с рукописным шрифтом -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ========== ЗАГРУЗОЧНЫЙ ЭКРАН ========== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-gif {
            width: 200px;
            height: 200px;
            object-fit: contain;
        }

        /* ========== ВЫЕЗЖАЮЩАЯ ПАНЕЛЬ БОНУСНОЙ КАРТЫ ========== */
        .bonus-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .bonus-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .bonus-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 85vh;
            max-height: 85vh;
            background-color: white;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.4s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .bonus-panel.active {
            transform: translateY(0);
        }

        .bonus-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            background-color: var(--main-color);
            border-bottom: 2px solid var(--dark-color);
        }

        .bonus-header h2 {
            color: var(--dark-color);
            font-size: 2.2rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
            margin: 0;
        }

        .close-bonus {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            padding: 5px;
        }

        .bonus-content {
            flex: 1;
            overflow-y: auto;
            padding: 0 25px;
        }

        .bonus-image-container {
            text-align: center;
            margin: 20px 0;
            position: relative;
        }

        .bonus-image {
            width: 280px;
            height: 280px;
            object-fit: contain;
            border-radius: 10px;
            margin: 0 auto;
            display: block;
        }

        /* Стили для маленьких картинок вокруг блока баланса */
        .bonus-balance-container {
            position: relative;
            background-color: var(--main-color);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 25px;
            margin-top: 20px;
            overflow: hidden;
        }

        .bonus-balance-container .ahmedik-img {
            position: absolute;
            width: 40px;
            height: 40px;
            object-fit: contain;
            z-index: 1;
            opacity: 0.7;
        }

        .bonus-balance {
            position: relative;
            z-index: 2;
        }

        .bonus-card-number {
            font-size: 1rem;
            color: var(--dark-color);
            margin-bottom: 15px;
            font-weight: 600;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 8px 15px;
            border-radius: 5px;
            display: inline-block;
        }

        .bonus-balance h3 {
            color: var(--dark-color);
            margin-bottom: 10px;
            font-family: var(--handwritten-font);
            font-size: 1.8rem;
        }

        .bonus-balance-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .bonus-currency {
            font-size: 1.2rem;
            color: #666;
        }

        .bonus-description {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.1rem;
            line-height: 1.6;
            color: #555;
        }

        .bonus-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--main-color);
            padding-bottom: 15px;
        }

        .bonus-tab {
            flex: 1;
            text-align: center;
            padding: 12px;
            background-color: #f5f5f5;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
            color: var(--dark-color);
        }

        .bonus-tab.active {
            background-color: var(--main-color);
            border-color: var(--dark-color);
        }

        .bonus-tab-content {
            display: none;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .bonus-tab-content.active {
            display: block;
        }

        .bonus-form {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .bonus-form.hidden {
            display: none;
        }

        /* ========== ВЫЕЗЖАЮЩАЯ ПАНЕЛЬ ЗАКАЗОВ (КАК КОРЗИНА) ========== */
        .orders-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .orders-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .orders-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 85vh;
            max-height: 85vh;
            background-color: white;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.4s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .orders-panel.active {
            transform: translateY(0);
        }

        .orders-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            background-color: var(--main-color);
            border-bottom: 2px solid var(--dark-color);
        }

        .orders-header h2 {
            color: var(--dark-color);
            font-size: 2.2rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
            margin: 0;
        }

        .close-orders {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            padding: 5px;
        }

        .orders-content {
            flex: 1;
            overflow-y: auto;
            padding: 0 25px;
        }

        .orders-container {
            padding: 20px 0;
        }

        .order-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .order-card.completed {
            background-color: #f5f5f5;
            opacity: 0.8;
        }

        .order-card:hover:not(.completed) {
            transform: translateY(-3px);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .order-number {
            font-weight: 700;
            color: var(--dark-color);
            font-size: 1.2rem;
        }

        .order-date {
            color: #666;
            font-size: 0.9rem;
        }

        .order-status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .status-ordered {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-cooking {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .status-delivery {
            background-color: #d4edda;
            color: #155724;
        }

        .status-ready {
            background-color: #cce5ff;
            color: #004085;
        }

        .status-completed {
            background-color: #e2e3e5;
            color: #383d41;
        }

        .order-items {
            margin-bottom: 15px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px dashed #eee;
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .item-total {
            font-weight: 600;
        }

        .order-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .order-total {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark-color);
        }

        .order-type {
            color: #666;
            font-size: 0.9rem;
        }

        .no-orders {
            text-align: center;
            padding: 50px 20px;
            color: #666;
            font-size: 1.2rem;
        }

        /* КНОПКА УДАЛЕНИЯ ЗАКАЗА */
        .delete-order-btn {
            background-color: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        .delete-order-btn:hover {
            background-color: #ff5252;
        }

        /* СТИЛИ ДЛЯ QR-КОДА И КНОПКИ */
        .qr-code-container {
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #eee;
            display: none;
        }

        .qr-code-container.show {
            display: block;
        }

        .qr-code-title {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .qr-code-image {
            width: 150px;
            height: 150px;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin: 0 auto;
            display: block;
        }

        .received-btn {
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
            margin-top: 15px;
            width: 100%;
            max-width: 200px;
        }

        .received-btn:hover {
            background-color: #7a4f29;
        }

        /* МОДАЛЬНОЕ ОКНО ОЦЕНКИ */
        .rating-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2002;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .rating-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .rating-modal {
            background-color: white;
            width: 90%;
            max-width: 400px;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .rating-modal-overlay.active .rating-modal {
            transform: translateY(0);
        }

        .rating-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .rating-modal-title {
            font-size: 1.8rem;
            color: var(--dark-color);
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .close-rating-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .rating-stars {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
        }

        .rating-star {
            font-size: 2.5rem;
            color: #ddd;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .rating-star:hover,
        .rating-star.active {
            color: #ffc107;
        }

        .submit-rating {
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .submit-rating:hover {
            background-color: #7a4f29;
        }

        /* ========== НОВАЯ ВКЛАДКА ОБЪЯВЛЕНИЯ ========== */
        .announcement-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .announcement-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .announcement-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 85vh;
            max-height: 85vh;
            background-color: white;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.4s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .announcement-panel.active {
            transform: translateY(0);
        }

        .announcement-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            background-color: var(--main-color);
            border-bottom: 2px solid var(--dark-color);
        }

        .announcement-header h2 {
            color: var(--dark-color);
            font-size: 2.2rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
            margin: 0;
        }

        .close-announcement {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            padding: 5px;
        }

        .announcement-content {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
        }

        /* Добавляем отступ сверху для карточек объявлений */
        .announcement-content {
            padding-top: 30px;
        }

        .announcement-card {
            background-color: var(--main-color);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 2px solid var(--dark-color);
            margin-bottom: 20px;
            position: relative;
        }

        .announcement-card:last-child {
            margin-bottom: 0;
        }

        .announcement-card.pinned {
            border: 3px solid #ffd700;
            background-color: #fff9e6;
            position: relative;
        }

        .pinned-icon {
            position: absolute;
            top: -10px;
            left: 20px;
            background-color: #ffd700;
            color: var(--dark-color);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transform: rotate(45deg);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 2;
        }

        .announcement-title {
            font-size: 1.8rem;
            color: var(--dark-color);
            font-family: var(--handwritten-font);
            font-weight: 700;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--dark-color);
            padding-bottom: 10px;
            padding-right: 30px;
        }

        .announcement-text {
            font-size: 1.2rem;
            line-height: 1.6;
            color: var(--text-color);
            word-break: break-word;
        }

        .announcement-text a {
            color: var(--dark-color);
            text-decoration: underline;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .announcement-text a:hover {
            color: #7a4f29;
        }

        .announcement-date {
            margin-top: 20px;
            text-align: right;
            font-style: italic;
            color: #666;
        }

        /* ========== ОСНОВНЫЕ СТИЛИ ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --main-color: #fccd97;
            --dark-color: #5c3d1e;
            --light-color: #fff9f0;
            --text-color: #333;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --handwritten-font: 'Caveat', cursive;
        }

        body {
            background-color: #fefefe;
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Шапка сайта - ОБНОВЛЕННАЯ С РАСКРЫВАЮЩИМСЯ МЕНЮ */
        header {
            background-color: var(--main-color);
            padding: 10px 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            order: 2;
        }

        .logo-image {
            height: 60px;
            width: 60px;
            background-color: transparent;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .logo-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            border-radius: 50%;
        }

        .logo-text {
            display: block;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            color: var(--dark-color);
        }

        .logo-text p {
            font-size: 0.8rem;
            color: var(--text-color);
            font-style: italic;
        }

        .header-buttons {
            display: flex;
            gap: 20px;
            order: 1;
        }

        /* НОВОЕ РАСКРЫВАЮЩЕЕСЯ МЕНЮ */
        .hamburger-menu {
            position: relative;
        }

        .hamburger-btn {
            background-color: var(--dark-color);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            position: relative;
        }

        .hamburger-btn:hover {
            background-color: #7a4f29;
            transform: translateY(-2px);
        }

        .hamburger-dropdown {
            position: absolute;
            top: 60px;
            left: 0;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            width: 250px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .hamburger-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.3s ease;
            color: var(--text-color);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background-color: var(--main-color);
        }

        .dropdown-item i {
            font-size: 1.3rem;
            color: var(--dark-color);
            width: 25px;
            text-align: center;
        }

        .dropdown-item span {
            font-weight: 600;
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--dark-color);
            order: 3;
            margin-left: auto;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--dark-color);
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* КАРУСЕЛЬ БАННЕРОВ */
        .banner-carousel {
            width: 100%;
            position: relative;
            overflow: hidden;
            background-color: white;
            height: 50vh;
            min-height: 300px;
            max-height: 500px;
            margin: 0;
            margin-bottom: 40px;
        }

        .carousel-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            overflow: hidden;
        }

        .carousel-track {
            display: flex;
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }

        .carousel-slide {
            min-width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .carousel-slide img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
            cursor: pointer;
        }

        /* Основной контент */
        main {
            padding: 0 0 50px;
        }

        /* Блок "О нашем заведении" */
        .about-section {
            background-color: var(--main-color);
            padding: 40px 30px;
            border-radius: 10px;
            margin-bottom: 40px;
            box-shadow: var(--shadow);
        }

        .about-section h2 {
            color: var(--dark-color);
            margin-bottom: 20px;
            text-align: center;
            font-size: 2.5rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .about-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Блок "Почему выбирают нас?" */
        .features-section {
            margin-bottom: 40px;
        }

        .features-section h2 {
            color: var(--dark-color);
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.5rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }

        .feature-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--dark-color);
            margin-bottom: 15px;
        }

        .feature-card h3 {
            color: var(--dark-color);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        /* Блок "Отзывы" */
        .reviews-section {
            margin-bottom: 40px;
        }

        .reviews-section h2 {
            color: var(--dark-color);
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.5rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .review-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .review-name {
            font-weight: 700;
            color: var(--dark-color);
            font-size: 1.1rem;
        }

        .review-rating {
            color: #ffc107;
            font-size: 1.1rem;
        }

        .review-text {
            font-style: italic;
            line-height: 1.6;
        }

        .bad-review {
            border: 2px solid #ff6b6b;
            background-color: #fff5f5;
        }

        /* Заголовок меню */
        .menu-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .menu-header h2 {
            color: var(--dark-color);
            font-size: 3rem;
            margin-bottom: 15px;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .menu-header p {
            color: #666;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .categories {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .category-btn {
            background-color: white;
            border: 2px solid var(--main-color);
            color: var(--dark-color);
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-btn:hover {
            background-color: var(--main-color);
        }

        .category-btn.active {
            background-color: var(--main-color);
            color: var(--dark-color);
            transform: scale(1.05);
        }

        .menu-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .menu-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .section-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--dark-color);
            font-size: 2.2rem;
            position: relative;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .section-title:after {
            content: '';
            display: block;
            width: 100px;
            height: 3px;
            background-color: var(--main-color);
            margin: 10px auto;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        /* Карточки товаров */
        .menu-item {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .menu-item:hover {
            transform: translateY(-5px);
        }

        .item-image {
            height: 200px;
            overflow: hidden;
            position: relative;
            background-color: var(--main-color);
        }

        .item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            display: block;
        }

        .menu-item:hover .item-image img {
            transform: scale(1.05);
        }

        .item-info {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .item-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .item-description {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.95rem;
            flex-grow: 1;
        }

        .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .item-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark-color);
        }

        .add-to-cart {
            background-color: var(--main-color);
            color: var(--dark-color);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }

        .add-to-cart:hover {
            background-color: #f5bf7d;
        }

        /* Блок "Связаться с нами" */
        .contact-section {
            background-color: var(--main-color);
            padding: 40px 30px;
            border-radius: 10px;
            margin-top: 40px;
            margin-bottom: 40px;
            box-shadow: var(--shadow);
        }

        .contact-section h2 {
            color: var(--dark-color);
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.5rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--dark-color);
        }

        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }

        .submit-btn {
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: block;
            width: 100%;
        }

        .submit-btn:hover {
            background-color: #7a4f29;
        }

        /* КНОПКА "НАВЕРХ" В ПРАВОМ НИЖНЕМ УГЛУ */
        .scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: var(--dark-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .scroll-to-top:hover {
            background-color: #7a4f29;
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
        }

        .scroll-to-top:active {
            transform: translateY(0);
        }

        /* ВСПЛЫВАЮЩЕЕ УВЕДОМЛЕНИЕ ПРИ ДОБАВЛЕНИИ В КОРЗИНУ */
        .cart-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--dark-color);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 2000;
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(120%);
            transition: transform 0.4s ease;
            max-width: 350px;
        }

        .cart-notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            font-size: 1.5rem;
            color: var(--main-color);
        }

        .notification-content h4 {
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .notification-content p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ВЫЕЗЖАЮЩАЯ КОРЗИНА СНИЗУ */
        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .cart-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .cart-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 85vh;
            max-height: 85vh;
            background-color: white;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.4s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .cart-panel.active {
            transform: translateY(0);
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            background-color: var(--main-color);
            border-bottom: 2px solid var(--dark-color);
        }

        .cart-header h2 {
            color: var(--dark-color);
            font-size: 2.2rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
            margin: 0;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            padding: 5px;
        }

        .cart-content {
            flex: 1;
            overflow-y: auto;
            padding: 0 25px;
        }

        .cart-items {
            padding: 20px 0;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-info {
            flex-grow: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--dark-color);
            font-weight: 700;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            background-color: var(--main-color);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .quantity-btn:hover {
            background-color: #f5bf7d;
        }

        .quantity {
            font-weight: 600;
            min-width: 25px;
            text-align: center;
        }

        .remove-item {
            background-color: transparent;
            border: none;
            color: #ff6b6b;
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: 15px;
            padding: 5px;
        }

        .cart-footer {
            padding: 20px 25px;
            border-top: 2px solid var(--main-color);
            background-color: white;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-color);
        }

        .order-btn {
            display: block;
            width: 100%;
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 18px;
            font-size: 1.3rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .order-btn:hover:not(:disabled) {
            background-color: #7a4f29;
            transform: translateY(-2px);
        }

        .order-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .empty-cart-message {
            text-align: center;
            padding: 50px 20px;
            color: #666;
            font-size: 1.2rem;
        }

        /* Модальное окно оформления заказа */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background-color: white;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 1.8rem;
            color: var(--dark-color);
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .delivery-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .delivery-option {
            flex: 1;
            text-align: center;
        }

        .delivery-option input {
            display: none;
        }

        .delivery-option label {
            display: block;
            padding: 12px;
            background-color: #f5f5f5;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .delivery-option input:checked + label {
            background-color: var(--main-color);
            border-color: var(--dark-color);
            font-weight: 600;
        }

        .delivery-address-group {
            display: none;
        }

        .delivery-address-group.visible {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Стили для кнопки-картинки бонусной карты */
        .bonus-card-button {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .bonus-card-button:hover {
            background-color: #f5f5f5;
            border-color: var(--main-color);
        }

        .bonus-card-button.active {
            background-color: var(--main-color);
            border-color: var(--dark-color);
        }

        .bonus-card-image {
            width: 60px;
            height: 60px;
            object-fit: contain;
            border-radius: 5px;
        }

        .bonus-card-text {
            flex-grow: 1;
        }

        .bonus-card-text h4 {
            color: var(--dark-color);
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .bonus-card-text p {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0;
        }

        .bonus-card-checkbox {
            width: 24px;
            height: 24px;
            accent-color: var(--dark-color);
        }

        .bonus-card-disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .bonus-card-disabled:hover {
            background-color: #f9f9f9;
            border-color: #ddd;
        }

        .bonus-balance-info {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            margin-left: 75px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .bonus-warning {
            font-size: 0.85rem;
            color: #ff6b6b;
            margin-top: 5px;
            margin-left: 75px;
        }

        .submit-order {
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }

        .submit-order:hover {
            background-color: #7a4f29;
        }

        .order-success {
            text-align: center;
            padding: 20px 0;
        }

        .order-success i {
            font-size: 4rem;
            color: #4caf50;
            margin-bottom: 20px;
        }

        .order-success h3 {
            color: var(--dark-color);
            margin-bottom: 15px;
            font-family: var(--handwritten-font);
            font-size: 2rem;
            font-weight: 700;
        }

        /* Футер */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0 30px;
            text-align: center;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .footer-logo-container {
            margin-bottom: 20px;
        }

        .footer-logo {
            height: 80px;
            width: 80px;
            background-color: transparent;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin: 0 auto 15px;
        }

        .footer-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            border-radius: 50%;
        }

        .footer-info {
            margin-bottom: 20px;
        }

        .footer-info p {
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .footer-email {
            color: var(--main-color);
            font-weight: 600;
        }

        /* КНОПКА ИТД В ФУТЕРЕ */
        .itd-button {
            display: inline-block;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: white;
            margin: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .itd-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .itd-button img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 8px;
        }

        .footer-disclaimer {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            max-width: 800px;
            line-height: 1.5;
        }

        /* Адаптивность для мобильных */
        @media (max-width: 768px) {
            .loading-gif {
                width: 150px;
                height: 150px;
            }

            .banner-carousel {
                height: 40vh;
                min-height: 250px;
                max-height: 350px;
            }

            header {
                padding: 8px 0;
            }

            .header-content {
                flex-wrap: wrap;
                gap: 10px;
            }

            .logo-text {
                display: none;
            }

            .logo-image {
                height: 50px;
                width: 50px;
            }

            .hamburger-btn {
                width: 45px;
                height: 45px;
                font-size: 1.3rem;
            }

            .hamburger-dropdown {
                width: 220px;
            }

            .cart-icon {
                font-size: 1.3rem;
            }

            .cart-count {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
                top: -6px;
                right: -6px;
            }

            .scroll-to-top {
                bottom: 20px;
                right: 20px;
                width: 55px;
                height: 55px;
                font-size: 1.6rem;
            }

            .cart-notification {
                top: 15px;
                right: 15px;
                left: 15px;
                max-width: none;
            }

            .menu-header h2 {
                font-size: 2.5rem;
            }

            .about-section h2,
            .features-section h2,
            .reviews-section h2,
            .contact-section h2 {
                font-size: 2.2rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .categories {
                flex-direction: column;
                align-items: center;
            }

            .category-btn {
                width: 200px;
            }

            .features-grid, .reviews-grid, .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }

            .cart-panel,
            .orders-panel,
            .bonus-panel,
            .announcement-panel {
                height: 80vh;
                max-height: 80vh;
            }

            .cart-header h2,
            .orders-header h2,
            .bonus-header h2,
            .announcement-header h2 {
                font-size: 1.8rem;
            }

            .modal,
            .rating-modal {
                width: 95%;
                padding: 20px;
            }

            .delivery-options {
                flex-direction: column;
            }

            .about-section, .contact-section {
                padding: 30px 20px;
            }

            .qr-code-image {
                width: 120px;
                height: 120px;
            }

            .bonus-image {
                width: 200px;
                height: 200px;
            }

            .bonus-card-button {
                padding: 12px;
            }

            .bonus-card-image {
                width: 50px;
                height: 50px;
            }

            .bonus-card-text h4 {
                font-size: 1rem;
            }

            .bonus-card-text p {
                font-size: 0.85rem;
            }

            .bonus-balance-info {
                margin-left: 65px;
            }

            .bonus-warning {
                margin-left: 65px;
            }

            .footer-disclaimer {
                font-size: 0.85rem;
                padding: 15px 10px 0;
            }

            .itd-button {
                width: 45px;
                height: 45px;
            }

            .delete-order-btn {
                padding: 6px 12px;
                font-size: 0.85rem;
            }

            .bonus-balance-container .ahmedik-img {
                width: 30px;
                height: 30px;
            }

            /* Стили для объявлений на мобильных */
            .announcement-content {
                padding-top: 30px;
            }

            .announcement-card {
                padding: 20px;
            }

            .announcement-title {
                font-size: 1.5rem;
            }

            .announcement-text {
                font-size: 1rem;
            }

            .pinned-icon {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .loading-gif {
                width: 120px;
                height: 120px;
            }

            .banner-carousel {
                height: 35vh;
                min-height: 200px;
                max-height: 280px;
            }

            .menu-grid, .features-grid, .reviews-grid {
                grid-template-columns: 1fr;
            }

            .item-image {
                height: 180px;
            }

            .logo-image {
                height: 45px;
                width: 45px;
            }

            .hamburger-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .hamburger-dropdown {
                width: 200px;
            }

            .menu-header h2 {
                font-size: 2rem;
            }

            .about-section h2,
            .features-section h2,
            .reviews-section h2,
            .contact-section h2 {
                font-size: 1.8rem;
            }

            .section-title {
                font-size: 1.6rem;
            }

            .footer-logo {
                height: 70px;
                width: 70px;
                font-size: 1.8rem;
            }

            .cart-panel,
            .orders-panel,
            .bonus-panel,
            .announcement-panel {
                height: 75vh;
                max-height: 75vh;
            }

            .cart-header,
            .orders-header,
            .bonus-header,
            .announcement-header {
                padding: 15px 20px;
            }

            .cart-content,
            .orders-content,
            .bonus-content,
            .announcement-content {
                padding: 0 20px;
            }

            .announcement-content {
                padding-top: 25px;
            }

            .cart-footer {
                padding: 15px 20px;
            }

            .cart-header h2,
            .orders-header h2,
            .bonus-header h2,
            .announcement-header h2 {
                font-size: 1.6rem;
            }

            .cart-notification {
                padding: 12px 20px;
            }

            .notification-icon {
                font-size: 1.3rem;
            }

            .notification-content h4 {
                font-size: 1rem;
            }

            .notification-content p {
                font-size: 0.85rem;
            }

            .scroll-to-top {
                bottom: 15px;
                right: 15px;
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }

            .qr-code-image {
                width: 100px;
                height: 100px;
            }

            .bonus-image {
                width: 180px;
                height: 180px;
            }

            .bonus-card-button {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .bonus-card-image {
                width: 60px;
                height: 60px;
            }

            .bonus-balance-info {
                margin-left: 0;
                justify-content: center;
            }

            .bonus-warning {
                margin-left: 0;
                text-align: center;
            }

            .rating-star {
                font-size: 2rem;
            }

            .itd-button {
                width: 40px;
                height: 40px;
            }

            .delete-order-btn {
                padding: 5px 10px;
                font-size: 0.8rem;
            }

            .bonus-balance-container .ahmedik-img {
                width: 25px;
                height: 25px;
            }

            .announcement-card {
                padding: 15px;
            }

            .announcement-title {
                font-size: 1.3rem;
            }

            .pinned-icon {
                width: 30px;
                height: 30px;
                font-size: 0.9rem;
                top: -8px;
                left: 15px;
            }
        }

        @media (max-width: 360px) {
            .loading-gif {
                width: 100px;
                height: 100px;
            }

            .banner-carousel {
                height: 30vh;
                min-height: 180px;
                max-height: 230px;
            }

            .hamburger-btn {
                width: 38px;
                height: 38px;
                font-size: 1.1rem;
            }

            .hamburger-dropdown {
                width: 180px;
            }

            .cart-panel,
            .orders-panel,
            .bonus-panel,
            .announcement-panel {
                height: 70vh;
                max-height: 70vh;
            }

            .scroll-to-top {
                bottom: 10px;
                right: 10px;
                width: 45px;
                height: 45px;
                font-size: 1.3rem;
            }

            .qr-code-image {
                width: 90px;
                height: 90px;
            }

            .bonus-image {
                width: 160px;
                height: 160px;
            }

            .itd-button {
                width: 35px;
                height: 35px;
            }

            .delete-order-btn {
                padding: 4px 8px;
                font-size: 0.75rem;
            }

            .bonus-balance-container .ahmedik-img {
                width: 20px;
                height: 20px;
            }

            .announcement-title {
                font-size: 1.2rem;
            }

            .announcement-text {
                font-size: 0.95rem;
            }
        }

        @media (max-height: 500px) and (orientation: landscape) {
            .loading-gif {
                width: 120px;
                height: 120px;
            }

            .banner-carousel {
                height: 70vh;
                min-height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- ЗАГРУЗОЧНЫЙ ЭКРАН (POP-AP УДАЛЕН) -->
    <div class="loading-screen" id="loadingScreen">
        <img src="img/img/loading.gif" alt="Загрузка" class="loading-gif">
    </div>

    <!-- МОДАЛЬНОЕ ОКНО ДЛЯ ОЦЕНКИ -->
    <div class="rating-modal-overlay" id="ratingModalOverlay">
        <div class="rating-modal">
            <div class="rating-modal-header">
                <h3 class="rating-modal-title">Оцените качество</h3>
                <button class="close-rating-modal" id="closeRatingModal">&times;</button>
            </div>
            <div class="rating-modal-content">
                <p style="text-align: center; margin-bottom: 20px;">Пожалуйста, оцените качество заказа:</p>
                <div class="rating-stars">
                    <div class="rating-star" data-rating="1">★</div>
                    <div class="rating-star" data-rating="2">★</div>
                    <div class="rating-star" data-rating="3">★</div>
                    <div class="rating-star" data-rating="4">★</div>
                    <div class="rating-star" data-rating="5">★</div>
                </div>
                <input type="hidden" id="selectedRating" value="0">
                <input type="hidden" id="ratingOrderId" value="">
                <button class="submit-rating" id="submitRating">Отправить оценку</button>
            </div>
        </div>
    </div>

    <!-- ВСПЛЫВАЮЩЕЕ УВЕДОМЛЕНИЕ ПРИ ДОБАВЛЕНИИ В КОРЗИНУ -->
    <div class="cart-notification" id="cartNotification">
        <div class="notification-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="notification-content">
            <h4>Товар добавлен в корзину</h4>
            <p id="notificationMessage">Шашлык из свинины добавлен в вашу корзину</p>
        </div>
    </div>

    <!-- КНОПКА "НАВЕРХ" В ПРАВОМ НИЖНЕМ УГЛУ -->
    <div class="scroll-to-top" id="scrollToTop">
        <i class="fas fa-chevron-up"></i>
    </div>

    <!-- Шапка сайта -->
    <header>
        <div class="container">
            <div class="header-content">
                <!-- РАСКРЫВАЮЩЕЕСЯ МЕНЮ -->
                <div class="hamburger-menu">
                    <button class="hamburger-btn" id="hamburgerBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="hamburger-dropdown" id="hamburgerDropdown">
                        <div class="dropdown-item" id="dropdownMenuBtn">
                            <i class="fas fa-book"></i>
                            <span>Меню</span>
                        </div>
                        <div class="dropdown-item" id="dropdownBonusBtn">
                            <i class="fas fa-percent"></i>
                            <span>Бонусная карта</span>
                        </div>
                        <div class="dropdown-item" id="dropdownOrdersBtn">
                            <i class="fas fa-clock"></i>
                            <span>Недавние заказы</span>
                        </div>
                        <div class="dropdown-item" id="dropdownAnnouncementBtn">
                            <i class="fas fa-bullhorn"></i>
                            <span>Объявления</span>
                        </div>
                    </div>
                </div>

                <div class="cart-icon" id="cartIcon">
                    <i class="fas fa-shopping-cart"></i>
                    <div class="cart-count">0</div>
                </div>

                <div class="logo">
                    <div class="logo-image">
                        <img src="img/img/logo.png" alt="Логотип Шашлычной 'У Ахмеда'">
                    </div>
                    <div class="logo-text">
                        <h1>Шашлычная "У Ахмеда"</h1>
                        <p>Открой для себя мир протухшего шашлыка</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ВЫЕЗЖАЮЩАЯ ПАНЕЛЬ БОНУСНОЙ КАРТЫ -->
    <div class="bonus-overlay" id="bonusOverlay"></div>
    <div class="bonus-panel" id="bonusPanel">
        <div class="bonus-header">
            <h2>Бонусная карта</h2>
            <button class="close-bonus" id="closeBonus">&times;</button>
        </div>
        <div class="bonus-content">
            <div class="bonus-image-container">
                <img src="img/img/bonus.png" alt="Бонусная карта У Ахмеда" class="bonus-image" id="bonusImage">
            </div>
            <div class="bonus-description">
                Бонусная карта "У Ахмеда" позволит вам жрать еще выгоднее! Оплачивайте часть покупки с помощью ахмедиков и получайте неимоверные скидки
            </div>

            <!-- БЛОК С БАЛАНСОМ И КАРТИНКАМИ -->
            <div class="bonus-balance-container" id="bonusBalanceContainer">
                <!-- Картинки ахмедиков будут добавлены через JavaScript -->
            </div>

            <div class="bonus-tabs">
                <div class="bonus-tab active" data-tab="get">Как получить ахмедики</div>
                <div class="bonus-tab" data-tab="spend">Как потратить ахмедики</div>
            </div>

            <div class="bonus-tab-content active" id="getTab">
                Используйте карту при оплате и получите 2-4 ахмедика
            </div>

            <div class="bonus-tab-content" id="spendTab">
                С помощью полученных бонусов оплатите 0,0000001% покупки или заказа
            </div>

            <div class="bonus-form" id="bonusForm">
                <h3 style="color: var(--dark-color); margin-bottom: 15px; text-align: center;">Активировать карту</h3>
                <form id="activateBonusForm">
                    <div class="form-group">
                        <label for="bonusFullName">ФИО держателя</label>
                        <input type="text" id="bonusFullName" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="bonusEmail">Электронная почта</label>
                        <input type="email" id="bonusEmail" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="bonusCardNumber">Номер карты (8 цифр)</label>
                        <input type="text" id="bonusCardNumber" class="form-control" 
                               pattern="[0-9]{8}" 
                               maxlength="8" 
                               placeholder="12345678"
                               required>
                        <small style="color: #666; font-size: 0.9rem;">Введите ровно 8 цифр</small>
                    </div>

                    <button type="submit" class="submit-btn">Активировать карту</button>
                </form>
            </div>
        </div>
    </div>

    <!-- КАРУСЕЛЬ БАННЕРОВ -->
    <section class="banner-carousel">
        <div class="carousel-container" id="carouselContainer">
            <div class="carousel-track" id="carouselTrack">
                <div class="carousel-slide">
                    <img src="img/img/banner1.png" alt="Баннер 1 - Акции и скидки" loading="lazy">
                </div>
                <div class="carousel-slide">
                    <img src="img/img/banner2.png" alt="Баннер 2 - Новые блюда" loading="lazy">
                </div>
                <div class="carousel-slide">
                    <img src="img/img/banner3.png" alt="Баннер 3 - Специальное предложение" loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- Основное содержимое -->
    <main class="container">
        <!-- Блок "О нашем заведении" -->
        <section class="about-section">
            <h2>О нашем заведении</h2>
            <p>Срухаланцы приходят в нашу шашлычную, чтобы насладиться вкусом нашего ароматного шашлыка, а уют заведения не дает им покинуть его. У нас самый лучший шашлык по мнению губернатора Срухаланска Пихоря Пижонова. Клиенты еще никогда не были разочарованы шашлычной «У Ахмеда!»</p>
        </section>

        <!-- Блок "Почему выбирают нас?" -->
        <section class="features-section">
            <h2>Почему выбирают нас?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-skull-crossbones"></i>
                    </div>
                    <h3>Убогое качество, но вкусные блюда</h3>
                    <p>Внешний вид не главное, главное - это неповторимый вкус!</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <h3>Неопытные повара</h3>
                    <p>Наши повара постоянно экспериментируют, чтобы удивить вас!</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <h3>Долгая готовка и доставка</h3>
                    <p>Мы не торопимся, чтобы всё было идеально приготовлено</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <h3>Космические цены</h3>
                    <p>За качество такого уровня нужно платить соответственно!</p>
                </div>
            </div>
        </section>

        <!-- Блок "Отзывы" -->
        <section class="reviews-section">
            <h2>Отзывы</h2>
            <div class="reviews-grid">
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Туманова Елена</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">Лучший ресторан, всегда сюда с коллегами захожу, а они тают от запаха.</div>
                </div>
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Пердато Сеньорита</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">Раньше думала что в этом Срухаланске все рестораны отстойные, но поменяла свое мнение после того как поела здесь! Лучше чем у меня на родине!</div>
                </div>
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Ахмедов Абдулла</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">Братья маладцы, никогда мимо не проезжаю, все невераятна вкусна.</div>
                </div>
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Минова Амина</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">Сайт просто супер! Большой выбор товара. Качество топ. Отравилась за секунду! Все довольны хочу организовать свадьбу под названием "LoveУшкА"</div>
                </div>
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Апельсинова Айгуль</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">шашлык прекрасный, дали с плесенью😊</div>
                </div>
                <div class="review-card bad-review">
                    <div class="review-header">
                        <div class="review-name">Коноплёва Жанна</div>
                        <div class="review-rating">★☆☆☆☆</div>
                    </div>
                    <div class="review-text">Ужас, как будто навоз сожрала, в туалете все вырагала так ещё и в углу нашла тону тараканов.</div>
                </div>
            </div>
        </section>

        <!-- Заголовок меню -->
        <section class="menu-header">
            <h2>Меню</h2>
            <p>Выберите категорию и наслаждайтесь нашими лучшими блюдами</p>
        </section>

        <!-- Категории меню -->
        <div class="categories">
            <button class="category-btn active" data-category="shashlik">Шашлык</button>
            <button class="category-btn" data-category="asia">Сочная азия</button>
            <button class="category-btn" data-category="sauces">Соусы</button>
            <button class="category-btn" data-category="drinks">Напитки</button>
        </div>

        <!-- Секция меню с шашлыками -->
        <section id="shashlik" class="menu-section active">
            <h2 class="section-title">Шашлык</h2>
            <div class="menu-grid" id="shashlikGrid">
                <!-- Товары будут добавлены через JavaScript -->
            </div>
        </section>

        <!-- Секция меню с сочной азией -->
        <section id="asia" class="menu-section">
            <h2 class="section-title">Сочная азия</h2>
            <div class="menu-grid" id="asiaGrid">
                <!-- Товары будут добавлены через JavaScript -->
            </div>
        </section>

        <!-- Секция меню с соусами -->
        <section id="sauces" class="menu-section">
            <h2 class="section-title">Соусы</h2>
            <div class="menu-grid" id="saucesGrid">
                <!-- Товары будут добавлены через JavaScript -->
            </div>
        </section>

        <!-- Секция меню с напитками -->
        <section id="drinks" class="menu-section">
            <h2 class="section-title">Напитки</h2>
            <div class="menu-grid" id="drinksGrid">
                <!-- Товары будут добавлены через JavaScript -->
            </div>
        </section>

        <!-- Блок "Связаться с нами" -->
        <section class="contact-section" id="contactSection">
            <h2>Связаться с нами</h2>
            <div class="contact-form">
                <form id="contactForm">
                    <div class="form-group">
                        <label for="contactName">Ваше имя</label>
                        <input type="text" id="contactName" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="contactEmail">Электронная почта</label>
                        <input type="email" id="contactEmail" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="contactMessage">Текст сообщения</label>
                        <textarea id="contactMessage" class="form-control" required></textarea>
                    </div>

                    <button type="submit" class="submit-btn">Отправить сообщение</button>
                </form>
                <div class="contact-success" id="contactSuccess" style="display: none; text-align: center; padding: 20px; color: green;">
                    <i class="fas fa-check-circle" style="font-size: 3rem; margin-bottom: 15px;"></i>
                    <h3>Сообщение отправлено!</h3>
                    <p>Мы свяжемся с вами в ближайшее время.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- ВЫЕЗЖАЮЩАЯ КОРЗИНА СНИЗУ -->
    <div class="cart-overlay" id="cartOverlay"></div>
    <div class="cart-panel" id="cartPanel">
        <div class="cart-header">
            <h2>Корзина</h2>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-content">
            <div class="cart-items" id="cartItems">
                <p class="empty-cart-message" id="emptyCartMessage">Ваша корзина пуста</p>
            </div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Итого:</span>
                <span id="cartTotal">0 ₽</span>
            </div>
            <button class="order-btn" id="orderBtn" disabled>Оформить заказ</button>
        </div>
    </div>

    <!-- ВЫЕЗЖАЮЩАЯ ПАНЕЛЬ ЗАКАЗОВ СНИЗУ -->
    <div class="orders-overlay" id="ordersOverlay"></div>
    <div class="orders-panel" id="ordersPanel">
        <div class="orders-header">
            <h2>Недавние заказы</h2>
            <button class="close-orders" id="closeOrders">&times;</button>
        </div>
        <div class="orders-content">
            <div class="orders-container" id="ordersContainer">
                <!-- Заказы будут добавлены через JavaScript -->
            </div>
        </div>
    </div>

    <!-- НОВАЯ ВЫЕЗЖАЮЩАЯ ПАНЕЛЬ ОБЪЯВЛЕНИЙ -->
    <div class="announcement-overlay" id="announcementOverlay"></div>
    <div class="announcement-panel" id="announcementPanel">
        <div class="announcement-header">
            <h2>Объявления</h2>
            <button class="close-announcement" id="closeAnnouncement">&times;</button>
        </div>
        <div class="announcement-content">
            <!-- Закрепленное объявление (поверх) -->
            <div class="announcement-card pinned">
                <div class="pinned-icon">
                    <i class="fas fa-thumbtack"></i>
                </div>
                <div class="announcement-title">Подпишитесь на наш ИТД канал</div>
                <div class="announcement-text">
                    <a href="https://итд.com/uahmeda52" target="_blank">итд.com/uahmeda52</a>
                </div>
            </div>

            <!-- Обычное объявление -->
            <div class="announcement-card">
                <div class="announcement-title">Изменения от 18.02.2026</div>
                <div class="announcement-text">
                    Добавлено раскрывающееся меню, вкладка «Объявления»
                </div>
                <div class="announcement-date">18 февраля 2026 г.</div>
            </div>
        </div>
    </div>

    <!-- Модальное окно оформления заказа -->
    <div class="modal-overlay" id="orderModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Оформление заказа</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-content">
                <form id="orderForm">
                    <div class="form-group">
                        <label for="customerName">Ваше имя</label>
                        <input type="text" id="customerName" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="customerEmail">Электронная почта</label>
                        <input type="email" id="customerEmail" class="form-control" required>
                    </div>

                    <div class="delivery-options">
                        <div class="delivery-option">
                            <input type="radio" id="pickup" name="deliveryType" value="pickup" checked>
                            <label for="pickup">Забрать в ресторане</label>
                        </div>
                        <div class="delivery-option">
                            <input type="radio" id="delivery" name="deliveryType" value="delivery">
                            <label for="delivery">Доставить по адресу</label>
                        </div>
                    </div>

                    <div class="form-group delivery-address-group" id="deliveryAddressGroup">
                        <label for="customerAddress">Адрес доставки</label>
                        <input type="text" id="customerAddress" class="form-control">
                    </div>

                    <!-- КНОПКА-КАРТИНКА ДЛЯ БОНУСНОЙ КАРТЫ -->
                    <div class="bonus-card-button" id="bonusCardButton">
                        <img src="img/img/bonus-card.png" alt="Бонусная карта" class="bonus-card-image">
                        <div class="bonus-card-text">
                            <h4>Использовать бонусную карту</h4>
                            <p>Скидка 1 рубль + начисление 2-4 ахмедиков</p>
                        </div>
                        <input type="checkbox" class="bonus-card-checkbox" id="useBonusCardInOrder">
                    </div>

                    <!-- ИНФОРМАЦИЯ О БАЛАНСЕ -->
                    <div class="bonus-balance-info" id="bonusBalanceInfo">
                        <i class="fas fa-wallet"></i> Баланс: <span id="bonusBalanceDisplay">0</span> ахмедиков
                    </div>

                    <!-- ПРЕДУПРЕЖДЕНИЕ О МИНИМАЛЬНОЙ СУММЕ -->
                    <div class="bonus-warning" id="bonusWarning" style="display: none;">
                        <i class="fas fa-exclamation-circle"></i> Бонусную карту можно использовать только в заказах от 500 рублей
                    </div>

                    <button type="submit" class="submit-order">Подтвердить заказ</button>
                </form>
                <div class="order-success" id="orderSuccess" style="display: none;">
                    <i class="fas fa-check-circle"></i>
                    <h3>Заказ успешно оформлен!</h3>
                    <p>Спасибо за ваш заказ! Подробности о нём во вкладке Недавние заказы</p>
                    <p>Номер вашего заказа: <strong id="orderNumber">AHM-001</strong></p>
                    <p id="bonusEarnedInfo" style="display: none;">Вам начислено: <strong id="bonusEarned">0</strong> ахмедиков</p>
                    <p id="bonusSpentInfo" style="display: none;">Списано с карты: <strong id="bonusSpent">0</strong> ахмедиков</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Футер -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo-container">
                    <div class="footer-logo">
                        <img src="img/img/logo.png" alt="Логотип Шашлычной 'У Ахмеда'">
                    </div>
                    <p style="font-size: 1.2rem; font-weight: 600;">Шашлычная "У Ахмеда"</p>
                </div>

                <div class="footer-info">
                    <p>г. Срухаланск, ул. Нахалова 32</p>
                    <p>Ежедневно с 10:00 до 23:00</p>
                    <p class="footer-email">uahmeda52@list.ru</p>
                </div>

                <!-- КНОПКА ИТД -->
                <a href="https://итд.com/uahmeda52" target="_blank" class="itd-button">
                    <img src="img/img/itd-logo.png" alt="ИТД" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmZmIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzAwMCI+SVREPC90ZXh0Pjwvc3ZnPg==';">
                </a>

                <div class="footer-disclaimer">
                    Сайт является шуточным и созданным в юмористических целях. Мы не предоставляем никаких услуг, а покупки невозможны.
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ========== УПРАВЛЕНИЕ ЗАГРУЗОЧНЫМ ЭКРАНОМ ==========
        const loadingScreen = document.getElementById('loadingScreen');

        // Показываем загрузочный экран 2 секунды, затем скрываем
        setTimeout(() => {
            loadingScreen.classList.add('hidden');
        }, 1000);

        // ========== МОДАЛЬНОЕ ОКНО ОЦЕНКИ ==========
        const ratingModalOverlay = document.getElementById('ratingModalOverlay');
        const closeRatingModal = document.getElementById('closeRatingModal');
        const ratingStars = document.querySelectorAll('.rating-star');
        const selectedRatingInput = document.getElementById('selectedRating');
        const ratingOrderIdInput = document.getElementById('ratingOrderId');
        const submitRatingBtn = document.getElementById('submitRating');
        let selectedRating = 0;

        // Инициализация звезд рейтинга
        function initRatingStars() {
            ratingStars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    selectedRating = rating;
                    selectedRatingInput.value = rating;

                    // Обновляем отображение звезд
                    updateStarsDisplay(rating);
                });

                // Эффект при наведении
                star.addEventListener('mouseenter', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    updateStarsHover(rating);
                });

                star.addEventListener('mouseleave', function() {
                    updateStarsDisplay(selectedRating);
                });
            });
        }

        // Обновление отображения звезд
        function updateStarsDisplay(rating) {
            ratingStars.forEach(star => {
                const starRating = parseInt(star.getAttribute('data-rating'));
                if (starRating <= rating) {
                    star.classList.add('active');
                    star.style.color = '#ffc107';
                } else {
                    star.classList.remove('active');
                    star.style.color = '#ddd';
                }
            });
        }

        // Эффект при наведении на звезды
        function updateStarsHover(rating) {
            ratingStars.forEach(star => {
                const starRating = parseInt(star.getAttribute('data-rating'));
                if (starRating <= rating) {
                    star.style.color = '#ffc107';
                } else {
                    star.style.color = '#ddd';
                }
            });
        }

        // Открытие модального окна оценки
        function openRatingModal(orderId) {
            ratingOrderIdInput.value = orderId;
            selectedRating = 0;
            selectedRatingInput.value = 0;

            // Сбрасываем звезды
            updateStarsDisplay(0);

            ratingModalOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Закрытие модального окна оценки
        function closeRatingModalFunc() {
            ratingModalOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Обработчики для модального окна оценки
        closeRatingModal.addEventListener('click', closeRatingModalFunc);
        ratingModalOverlay.addEventListener('click', function(e) {
            if (e.target === ratingModalOverlay) {
                closeRatingModalFunc();
            }
        });

        // Отправка оценки
        submitRatingBtn.addEventListener('click', function() {
            const orderId = ratingOrderIdInput.value;
            const rating = selectedRating;

            if (rating === 0) {
                alert('Пожалуйста, выберите оценку');
                return;
            }

            // Находим заказ и отмечаем его как полученный
            const orderIndex = orders.findIndex(order => order.id === orderId);
            if (orderIndex !== -1) {
                orders[orderIndex].status = 'completed';
                orders[orderIndex].rating = rating;
                orders[orderIndex].completedAt = new Date().getTime();

                saveOrdersToStorage();
                renderOrders();

                // Показываем уведомление
                alert(`Спасибо за вашу оценку: ${rating} звезд!`);
            }

            closeRatingModalFunc();
        });

        // ========== БОНУСНАЯ КАРТА ==========
        let bonusCard = null;

        // DOM элементы для бонусной карты
        const bonusBtn = document.getElementById('bonusBtn');
        const bonusOverlay = document.getElementById('bonusOverlay');
        const bonusPanel = document.getElementById('bonusPanel');
        const closeBonus = document.getElementById('closeBonus');
        const bonusImage = document.getElementById('bonusImage');
        const bonusBalanceContainer = document.getElementById('bonusBalanceContainer');
        const bonusTabs = document.querySelectorAll('.bonus-tab');
        const bonusTabContents = document.querySelectorAll('.bonus-tab-content');
        const bonusForm = document.getElementById('bonusForm');
        const activateBonusForm = document.getElementById('activateBonusForm');
        const bonusCardNumberInput = document.getElementById('bonusCardNumber');
        const bonusCardButton = document.getElementById('bonusCardButton');
        const useBonusCardInOrder = document.getElementById('useBonusCardInOrder');
        const bonusBalanceDisplay = document.getElementById('bonusBalanceDisplay');
        const bonusBalanceInfo = document.getElementById('bonusBalanceInfo');
        const bonusWarning = document.getElementById('bonusWarning');
        const bonusEarnedInfo = document.getElementById('bonusEarnedInfo');
        const bonusEarned = document.getElementById('bonusEarned');
        const bonusSpentInfo = document.getElementById('bonusSpentInfo');
        const bonusSpent = document.getElementById('bonusSpent');

        // Открытие/закрытие панели бонусной карты
        function openBonusPanel() {
            bonusOverlay.classList.add('active');
            bonusPanel.classList.add('active');
            document.body.style.overflow = 'hidden';
            loadBonusCardFromStorage();
            updateBonusDisplay();
        }

        function closeBonusPanel() {
            bonusOverlay.classList.remove('active');
            bonusPanel.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Обработчики для панели бонусной карты
        closeBonus.addEventListener('click', closeBonusPanel);
        bonusOverlay.addEventListener('click', closeBonusPanel);

        // Переключение вкладок в бонусной панели
        bonusTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');

                bonusTabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                bonusTabContents.forEach(content => {
                    content.classList.remove('active');
                });

                document.getElementById(tabId + 'Tab').classList.add('active');
            });
        });

        // Ограничение ввода номера карты только цифрами и максимум 8 символов
        bonusCardNumberInput.addEventListener('input', function() {
            this.value = this.value.replace(/\D/g, '').slice(0, 8);
        });

        // Активация бонусной карты
        activateBonusForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const fullName = document.getElementById('bonusFullName').value;
            const email = document.getElementById('bonusEmail').value;
            const cardNumber = document.getElementById('bonusCardNumber').value;

            if (!fullName || !email || !cardNumber) {
                alert('Пожалуйста, заполните все поля');
                return;
            }

            if (cardNumber.length !== 8) {
                alert('Номер карты должен содержать ровно 8 цифр');
                return;
            }

            // Проверяем, существует ли уже карта с таким номером
            const savedBonusCards = JSON.parse(localStorage.getItem('ahmedBonusCards') || '[]');
            const existingCard = savedBonusCards.find(card => card.cardNumber === cardNumber);

            if (existingCard) {
                // Если карта уже активирована, загружаем её
                bonusCard = existingCard;
                alert(`Карта ${cardNumber} уже активирована. Баланс: ${bonusCard.balance} ахмедиков`);
            } else {
                // Создаем новую карту
                bonusCard = {
                    id: 'bonus_' + Date.now(),
                    fullName: fullName,
                    email: email,
                    cardNumber: cardNumber,
                    balance: 0,
                    firstUse: true, // Флаг первого использования
                    createdAt: new Date().getTime(),
                    userId: userId
                };

                // Сохраняем карту в список
                savedBonusCards.push(bonusCard);
                localStorage.setItem('ahmedBonusCards', JSON.stringify(savedBonusCards));

                alert('Бонусная карта успешно активирована! Теперь вы можете использовать её при оформлении заказов.');
            }

            // Сохраняем текущую карту для пользователя
            saveBonusCardToStorage();

            // Обновляем отображение
            updateBonusDisplay();

            // Скрываем форму активации
            bonusForm.classList.add('hidden');

            // Сбрасываем форму
            activateBonusForm.reset();
        });

        // Обновление отображения информации о бонусной карте
        function updateBonusDisplay() {
            if (bonusCard) {
                // Создаем HTML для блока баланса с картинками
                bonusBalanceContainer.innerHTML = '';

                // Добавляем маленькие картинки ахмедиков вокруг блока
                const positions = [
                    { top: '10%', left: '5%', rotate: '15deg' },
                    { top: '5%', right: '10%', rotate: '-10deg' },
                    { bottom: '15%', left: '8%', rotate: '20deg' },
                    { bottom: '5%', right: '15%', rotate: '-15deg' },
                    { top: '20%', left: '20%', rotate: '25deg' },
                    { top: '15%', right: '25%', rotate: '-20deg' },
                    { bottom: '25%', right: '5%', rotate: '10deg' },
                    { top: '30%', left: '12%', rotate: '-25deg' }
                ];

                positions.forEach(pos => {
                    const img = document.createElement('img');
                    img.src = 'img/img/ahmedik.png';
                    img.className = 'ahmedik-img';
                    img.style.top = pos.top || 'auto';
                    img.style.bottom = pos.bottom || 'auto';
                    img.style.left = pos.left || 'auto';
                    img.style.right = pos.right || 'auto';
                    img.style.transform = `rotate(${pos.rotate})`;
                    img.alt = 'Ахмедик';
                    img.onerror = function() {
                        this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2ZjY2Q5NyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM1YzNkMWUiPkFIPC90ZXh0Pjwvc3ZnPg==';
                    };
                    bonusBalanceContainer.appendChild(img);
                });

                // Добавляем блок с балансом
                const balanceDiv = document.createElement('div');
                balanceDiv.className = 'bonus-balance';
                balanceDiv.innerHTML = `
                    <div class="bonus-card-number">Номер карты: ${bonusCard.cardNumber}</div>
                    <h3>Ваш баланс</h3>
                    <div class="bonus-balance-value">
                        <span id="bonusBalanceValue">${bonusCard.balance}</span>
                        <span class="bonus-currency">ахмедиков</span>
                    </div>
                `;
                bonusBalanceContainer.appendChild(balanceDiv);

                // Обновляем отображение в других местах
                bonusBalanceDisplay.textContent = bonusCard.balance;
                bonusBalanceInfo.style.display = 'flex';

                // Показываем кнопку бонусной карты
                if (bonusCardButton) {
                    bonusCardButton.style.display = 'flex';
                }

                // Показываем контейнер баланса
                bonusBalanceContainer.style.display = 'block';
            } else {
                // Скрываем контейнер баланса
                bonusBalanceContainer.style.display = 'none';
                bonusForm.classList.remove('hidden');
                bonusBalanceInfo.style.display = 'none';

                if (bonusCardButton) {
                    bonusCardButton.style.display = 'none';
                }
            }
        }

        // Сохранение бонусной карты в localStorage
        function saveBonusCardToStorage() {
            if (bonusCard) {
                localStorage.setItem('ahmedBonusCard_' + userId, JSON.stringify(bonusCard));
            } else {
                localStorage.removeItem('ahmedBonusCard_' + userId);
            }
        }

        // Загрузка бонусной карты из localStorage
        function loadBonusCardFromStorage() {
            const savedBonusCard = localStorage.getItem('ahmedBonusCard_' + userId);
            if (savedBonusCard) {
                bonusCard = JSON.parse(savedBonusCard);
            }
        }

        // Функция для начисления бонусов
        function addBonusPoints(points) {
            if (!bonusCard) return false;

            bonusCard.balance += points;
            saveBonusCardToStorage();
            updateBonusDisplay();

            return true;
        }

        // Функция для списания бонусов
        function deductBonusPoints(points) {
            if (!bonusCard || bonusCard.balance < points) return false;

            bonusCard.balance -= points;

            // После первого использования снимаем флаг
            if (bonusCard.firstUse) {
                bonusCard.firstUse = false;
            }

            saveBonusCardToStorage();
            updateBonusDisplay();

            return true;
        }

        // Обработка клика на кнопку-картинку бонусной карты
        if (bonusCardButton) {
            bonusCardButton.addEventListener('click', function() {
                if (!bonusCard) {
                    alert('У вас нет активной бонусной карты. Пожалуйста, активируйте карту в разделе "Бонусная карта".');
                    return;
                }

                // Проверяем минимальную сумму заказа
                const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                if (totalPrice < 500) {
                    alert('Бонусную карту можно использовать только в заказах от 500 рублей');
                    return;
                }

                // Переключаем чекбокс
                useBonusCardInOrder.checked = !useBonusCardInOrder.checked;

                // Обновляем стиль кнопки
                if (useBonusCardInOrder.checked) {
                    bonusCardButton.classList.add('active');
                } else {
                    bonusCardButton.classList.remove('active');
                }
            });
        }

        // Обработка изменения чекбокса
        if (useBonusCardInOrder) {
            useBonusCardInOrder.addEventListener('change', function() {
                if (this.checked) {
                    bonusCardButton.classList.add('active');
                } else {
                    bonusCardButton.classList.remove('active');
                }
            });
        }

        // Обработка изображения бонусной карты
        if (bonusImage) {
            bonusImage.onerror = function() {
                this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmNjZDk3Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzVjM2QxZSI+Qm9udXM8L3RleHQ+PC9zdmc+';
                this.alt = 'Бонусная карта';
            };
        }

        // Обработка изображения кнопки-картинки бонусной карты
        const bonusCardImage = document.querySelector('.bonus-card-image');
        if (bonusCardImage) {
            bonusCardImage.onerror = function() {
                this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2ZjY2Q5NyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM1YzNkMWUiPkJvbnVzPC90ZXh0Pjwvc3ZnPg==';
                this.alt = 'Бонусная карта';
            };
        }

        // ========== РАСКРЫВАЮЩЕЕСЯ МЕНЮ ==========
        const hamburgerBtn = document.getElementById('hamburgerBtn');
        const hamburgerDropdown = document.getElementById('hamburgerDropdown');
        const dropdownMenuBtn = document.getElementById('dropdownMenuBtn');
        const dropdownBonusBtn = document.getElementById('dropdownBonusBtn');
        const dropdownOrdersBtn = document.getElementById('dropdownOrdersBtn');
        const dropdownAnnouncementBtn = document.getElementById('dropdownAnnouncementBtn');

        // Открытие/закрытие раскрывающегося меню
        hamburgerBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            hamburgerDropdown.classList.toggle('active');
        });

        // Закрытие меню при клике вне его
        document.addEventListener('click', function(e) {
            if (!hamburgerBtn.contains(e.target) && !hamburgerDropdown.contains(e.target)) {
                hamburgerDropdown.classList.remove('active');
            }
        });

        // Обработчики для пунктов меню
        dropdownMenuBtn.addEventListener('click', function() {
            document.querySelector('.menu-header').scrollIntoView({ behavior: 'smooth' });
            hamburgerDropdown.classList.remove('active');
        });

        dropdownBonusBtn.addEventListener('click', function() {
            openBonusPanel();
            hamburgerDropdown.classList.remove('active');
        });

        dropdownOrdersBtn.addEventListener('click', function() {
            openOrdersPanel();
            hamburgerDropdown.classList.remove('active');
        });

        dropdownAnnouncementBtn.addEventListener('click', function() {
            openAnnouncementPanel();
            hamburgerDropdown.classList.remove('active');
        });

        // ========== НОВАЯ ВКЛАДКА ОБЪЯВЛЕНИЯ ==========
        const announcementOverlay = document.getElementById('announcementOverlay');
        const announcementPanel = document.getElementById('announcementPanel');
        const closeAnnouncement = document.getElementById('closeAnnouncement');

        function openAnnouncementPanel() {
            announcementOverlay.classList.add('active');
            announcementPanel.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeAnnouncementPanel() {
            announcementOverlay.classList.remove('active');
            announcementPanel.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        closeAnnouncement.addEventListener('click', closeAnnouncementPanel);
        announcementOverlay.addEventListener('click', closeAnnouncementPanel);

        // ========== ОСТАЛЬНОЙ КОД СКРИПТА ==========

        // Данные для карусели баннеров
        const bannerImages = [
            { src: 'img/banner1.png', alt: 'Баннер 1 - Акции и скидки' },
            { src: 'img/banner2.png', alt: 'Баннер 2 - Новые блюда' },
            { src: 'img/banner3.png', alt: 'Баннер 3 - Специальное предложение' }
        ];

        // Обновленные данные меню (без состава)
        const menuData = {
            shashlik: [
                { 
                    id: 2, 
                    name: "Шашлык из курицы", 
                    description: "Сочные куриные бедра на мангале", 
                    price: 280, 
                    image: "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=600&h=400&fit=crop" 
                },
                { 
                    id: 3, 
                    name: "Люля-кебаб из баранины", 
                    description: "Традиционный кавказский люля-кебаб", 
                    price: 420, 
                    image: "https://images.unsplash.com/photo-1529193591184-b1d58069ecdd?w=600&h=400&fit=crop" 
                },
                { 
                    id: 4, 
                    name: "Шашлык из говядины", 
                    description: "Пряная говядина на углях", 
                    price: 380, 
                    image: "https://images.unsplash.com/photo-1544025162-d76694265947?w=600&h=400&fit=crop" 
                },
                { 
                    id: 18, 
                    name: "Лаваш", 
                    description: "Свежий тонкий лаваш для шашлыка", 
                    price: 80, 
                    image: "https://images.unsplash.com/photo-1641664734521-78b8c8f5e9b2?w=600&h=400&fit=crop" 
                }
            ],
            asia: [
                { 
                    id: 30, 
                    name: "Бешбармак", 
                    description: "Традиционное казахское блюдо из мяса и теста", 
                    price: 450, 
                    image: "https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=600&h=400&fit=crop" 
                },
                { 
                    id: 31, 
                    name: "Баурсаки (3 штуки)", 
                    description: "Пышные жареные пончики по-казахски", 
                    price: 120, 
                    image: "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=600&h=400&fit=crop" 
                },
                { 
                    id: 32, 
                    name: "Плов по-узбекски", 
                    description: "Ароматный узбекский плов с бараниной", 
                    price: 380, 
                    image: "https://images.unsplash.com/photo-1563379926898-05f4575a45d8?w=600&h=400&fit=crop&auto=format" 
                },
                { 
                    id: 33, 
                    name: "Кумыс", 
                    description: "Традиционный кисломолочный напиток", 
                    price: 150, 
                    image: "https://images.unsplash.com/photo-1621506289937-a8e4df240d0b?w=600&h=400&fit=crop" 
                },
                { 
                    id: 34, 
                    name: "Эчпочмаки (3 штуки)", 
                    description: "Татарские треугольные пирожки с мясом", 
                    price: 180, 
                    image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=600&h=400&fit=crop" 
                },
                { 
                    id: 35, 
                    name: "Чак-чак", 
                    description: "Восточная сладость из теста с медом", 
                    price: 200, 
                    image: "https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?w=600&h=400&fit=crop" 
                }
            ],
            sauces: [
                { 
                    id: 16, 
                    name: "Сырный соус", 
                    description: "Ароматный сливочно-сырный соус с травами", 
                    price: 95, 
                    image: "https://images.unsplash.com/photo-1563379926898-05f4575a45d8?w=600&h=400&fit=crop&auto=format" 
                },
                { 
                    id: 17, 
                    name: "Кетчуп домашний", 
                    description: "Натуральный томатный кетчуп с пряностями", 
                    price: 65, 
                    image: "https://images.unsplash.com/photo-1576193492451-bc6d703a5b3b?w=600&h=400&fit=crop&auto=format" 
                },
                { 
                    id: 19, 
                    name: "Чесночный соус", 
                    description: "Ароматный соус на основе чеснока и сметаны", 
                    price: 75, 
                    image: "https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=600&h=400&fit=crop" 
                }
            ],
            drinks: [
                { 
                    id: 11, 
                    name: "Лимонад домашний", 
                    description: "Освежающий лимонад с мятой и лимоном", 
                    price: 120, 
                    image: "https://images.unsplash.com/photo-1621506289937-a8e4df240d0b?w=600&h=400&fit=crop" 
                },
                { 
                    id: 14, 
                    name: "Чай черный", 
                    description: "Ароматный черный чай с травами", 
                    price: 70, 
                    image: "https://images.unsplash.com/photo-1568649929103-28ffbefaca1e?w=600&h=400&fit=crop&auto=format" 
                },
                { 
                    id: 15, 
                    name: "Кофе по-восточному", 
                    description: "Ароматный кофе с кардамоном", 
                    price: 150, 
                    image: "https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=600&h=400&fit=crop" 
                },
                { 
                    id: 20, 
                    name: "Чай с лимоном", 
                    description: "Ароматный чай с долькой лимона", 
                    price: 85, 
                    image: "https://images.unsplash.com/photo-1567337560842-9d2d11f9b1b7?w=600&h=400&fit=crop" 
                },
                { 
                    id: 21, 
                    name: "Зелёный чай", 
                    description: "Освежающий зеленый чай с жасмином", 
                    price: 90, 
                    image: "https://images.unsplash.com/photo-1561047029-3000c68339ca?w=600&h=400&fit=crop" 
                }
            ]
        };

        // Корзина и заказы
        let cart = [];
        let orders = [];
        let orderNumber = 1;

        // ИДЕНТИФИКАТОР ПОЛЬЗОВАТЕЛЯ (для изоляции заказов)
        let userId = localStorage.getItem('ahmedUserId');
        if (!userId) {
            userId = 'user_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('ahmedUserId', userId);
        }

        // Карусель
        let currentSlide = 0;
        let slideInterval;
        let isTransitioning = false;
        let touchStartX = 0;
        let touchEndX = 0;

        // DOM элементы
        const carouselTrack = document.getElementById('carouselTrack');
        const slides = document.querySelectorAll('.carousel-slide');
        const carouselContainer = document.getElementById('carouselContainer');
        const categoryButtons = document.querySelectorAll('.category-btn');
        const menuSections = document.querySelectorAll('.menu-section');
        const ordersBtn = document.getElementById('ordersBtn');
        const ordersOverlay = document.getElementById('ordersOverlay');
        const ordersPanel = document.getElementById('ordersPanel');
        const closeOrders = document.getElementById('closeOrders');
        const ordersContainer = document.getElementById('ordersContainer');
        const cartIcon = document.getElementById('cartIcon');
        const cartCount = document.querySelector('.cart-count');
        const cartItemsContainer = document.getElementById('cartItems');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        const cartTotalElement = document.getElementById('cartTotal');
        const orderBtn = document.getElementById('orderBtn');
        const orderModal = document.getElementById('orderModal');
        const closeModal = document.getElementById('closeModal');
        const orderForm = document.getElementById('orderForm');
        const orderSuccess = document.getElementById('orderSuccess');
        const orderNumberElement = document.getElementById('orderNumber');
        const deliveryTypeRadios = document.querySelectorAll('input[name="deliveryType"]');
        const deliveryAddressGroup = document.getElementById('deliveryAddressGroup');
        const deliveryAddressInput = document.getElementById('customerAddress');
        const menuBtn = document.getElementById('menuBtn');
        const contactForm = document.getElementById('contactForm');
        const contactSuccess = document.getElementById('contactSuccess');
        const cartOverlay = document.getElementById('cartOverlay');
        const cartPanel = document.getElementById('cartPanel');
        const closeCart = document.getElementById('closeCart');
        const cartNotification = document.getElementById('cartNotification');
        const notificationMessage = document.getElementById('notificationMessage');
        const scrollToTopBtn = document.getElementById('scrollToTop');

        // ========== ФУНКЦИИ КАРУСЕЛИ ==========
        function showSlide(index) {
            if (isTransitioning) return;

            isTransitioning = true;

            currentSlide = index;
            const offset = -currentSlide * 100;
            carouselTrack.style.transform = `translateX(${offset}%)`;

            setTimeout(() => {
                isTransitioning = false;
            }, 800);
        }

        function nextSlide() {
            let nextIndex = currentSlide + 1;

            if (nextIndex >= slides.length) {
                const firstSlide = slides[0].cloneNode(true);
                carouselTrack.appendChild(firstSlide);

                setTimeout(() => {
                    showSlide(currentSlide + 1);
                }, 50);

                setTimeout(() => {
                    slides[0].remove();
                    carouselTrack.style.transition = 'none';
                    carouselTrack.style.transform = `translateX(0)`;
                    currentSlide = 0;

                    setTimeout(() => {
                        carouselTrack.style.transition = 'transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                    }, 50);
                }, 850);
            } else {
                showSlide(nextIndex);
            }
        }

        function startAutoSlide() {
            clearInterval(slideInterval);
            slideInterval = setInterval(nextSlide, 5000);
        }

        function stopAutoSlide() {
            clearInterval(slideInterval);
        }

        function handleTouchStart(e) {
            touchStartX = e.touches[0].clientX;
            stopAutoSlide();
        }

        function handleTouchMove(e) {
            touchEndX = e.touches[0].clientX;
        }

        function handleTouchEnd() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;

            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    nextSlide();
                }
            }

            startAutoSlide();
        }

        function handleImageError(img) {
            img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwMCIgaGVpZ2h0PSIxMDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmZmZmZmYiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjQ4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNWMzZDFlIiBkeT0iLjNlbSI+QmFubmVyPC90ZXh0Pjwvc3ZnPg==';
            img.alt = 'Баннер временно недоступен';
        }

        function initializeCarousel() {
            // Добавляем обработчики клика на баннеры
            slides.forEach((slide, index) => {
                const img = slide.querySelector('img');
                if (img) {
                    img.onerror = function() {
                        handleImageError(this);
                    };

                    // Делаем второй баннер (индекс 1) кликабельным
                    if (index === 1) {
                        img.style.cursor = 'pointer';
                        img.addEventListener('click', function(e) {
                            e.preventDefault();
                            openBonusPanel();
                        });

                        // Также делаем весь слайд кликабельным
                        slide.style.cursor = 'pointer';
                        slide.addEventListener('click', function(e) {
                            if (e.target === slide) {
                                openBonusPanel();
                            }
                        });
                    }
                }
            });

            carouselContainer.addEventListener('touchstart', handleTouchStart, false);
            carouselContainer.addEventListener('touchmove', handleTouchMove, false);
            carouselContainer.addEventListener('touchend', handleTouchEnd, false);

            let mouseDownX = 0;
            let mouseUpX = 0;

            carouselContainer.addEventListener('mousedown', function(e) {
                mouseDownX = e.clientX;
                stopAutoSlide();
            });

            carouselContainer.addEventListener('mouseup', function(e) {
                mouseUpX = e.clientX;
                const diff = mouseDownX - mouseUpX;
                const swipeThreshold = 50;

                if (Math.abs(diff) > swipeThreshold) {
                    if (diff > 0) {
                        nextSlide();
                    }
                }

                startAutoSlide();
            });

            carouselContainer.addEventListener('mouseenter', stopAutoSlide);
            carouselContainer.addEventListener('mouseleave', startAutoSlide);

            startAutoSlide();
        }

        // ========== ФУНКЦИИ ДЛЯ ЗАКАЗОВ ==========
        // Уникальные номера заказов
        function getNextOrderNumber() {
            // Получаем максимальный номер заказа из сохраненных заказов текущего пользователя
            const userOrders = orders.filter(order => order.userId === userId);
            const maxOrderNumber = userOrders.reduce((max, order) => {
                const orderNum = parseInt(order.id.replace('AHM-', ''));
                return orderNum > max ? orderNum : max;
            }, 0);

            // Возвращаем следующий номер
            return Math.max(orderNumber, maxOrderNumber + 1);
        }

        function createOrder(customerData, cartItems, deliveryType, address, useBonus) {
            // Используем уникальный номер заказа
            const newOrderNumber = getNextOrderNumber();

            // Рассчитываем итоговую сумму
            let total = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let bonusEarnedAmount = 0;
            let bonusSpentAmount = 0;
            let bonusUsed = false;

            // Если используется бонусная карта и сумма заказа >= 500 рублей
            if (useBonus && bonusCard && total >= 500) {
                bonusUsed = true;

                // Скидка 1 рубль
                total = Math.max(0, total - 1);

                // Начисляем 2-4 ахмедика (рандомно)
                bonusEarnedAmount = Math.floor(Math.random() * 3) + 2; // 2, 3 или 4
                addBonusPoints(bonusEarnedAmount);

                // Только если это НЕ первое использование карты, списываем бонусы
                if (!bonusCard.firstUse && bonusCard.balance > 0) {
                    // Списание рандомного количества ахмедиков от 1 до 5 (но не больше баланса)
                    const maxDeductible = Math.min(bonusCard.balance, 5);
                    if (maxDeductible > 0) {
                        bonusSpentAmount = Math.floor(Math.random() * maxDeductible) + 1;
                        // Убедимся, что не списываем больше, чем есть
                        bonusSpentAmount = Math.min(bonusSpentAmount, bonusCard.balance);

                        if (deductBonusPoints(bonusSpentAmount)) {
                            // Успешно списали бонусы
                        }
                    }
                }

                // После первого использования снимаем флаг
                if (bonusCard.firstUse) {
                    bonusCard.firstUse = false;
                    saveBonusCardToStorage();
                }
            }

            const order = {
                id: `AHM-${newOrderNumber.toString().padStart(3, '0')}`,
                userId: userId, // Добавляем идентификатор пользователя
                date: new Date().toLocaleDateString('ru-RU'),
                customerName: customerData.name,
                customerEmail: customerData.email,
                items: cartItems.map(item => ({
                    name: item.name,
                    price: item.price,
                    quantity: item.quantity
                })),
                total: total,
                deliveryType: deliveryType,
                address: address,
                status: 'ordered',
                statusChanged: new Date().getTime(),
                rating: null,
                bonusUsed: bonusUsed,
                bonusEarned: bonusEarnedAmount,
                bonusSpent: bonusSpentAmount,
                // Флаг для отслеживания, нужно ли показывать кнопку "Уже забрал"
                canBeReceived: deliveryType === 'pickup'
            };

            // Обновляем глобальный номер заказа
            orderNumber = newOrderNumber + 1;
            orders.unshift(order);
            saveOrdersToStorage();
            renderOrders();

            return order;
        }

        function getStatusText(status) {
            switch(status) {
                case 'ordered': return 'оформлен';
                case 'cooking': return 'готовка';
                case 'delivery': return 'доставка';
                case 'ready': return 'заказ ждет вас';
                case 'completed': return 'получен';
                default: return 'оформлен';
            }
        }

        function getStatusClass(status) {
            switch(status) {
                case 'ordered': return 'status-ordered';
                case 'cooking': return 'status-cooking';
                case 'delivery': return 'status-delivery';
                case 'ready': return 'status-ready';
                case 'completed': return 'status-completed';
                default: return 'status-ordered';
            }
        }

        // Обновление статусов заказов
        function updateOrderStatuses() {
            const now = new Date().getTime();
            const minuteInMs = 60 * 1000;
            const fiveMinutesInMs = 5 * minuteInMs;
            const tenMinutesInMs = 10 * minuteInMs;
            const fifteenMinutesInMs = 15 * minuteInMs;

            orders.forEach(order => {
                // Обновляем статус только для незавершенных заказов
                if (order.status !== 'completed') {
                    const timeSinceCreation = now - order.statusChanged;

                    if (order.status === 'ordered' && timeSinceCreation > fiveMinutesInMs) {
                        order.status = 'cooking';
                        order.statusChanged = now;
                    } else if (order.status === 'cooking' && timeSinceCreation > tenMinutesInMs) {
                        if (order.deliveryType === 'delivery') {
                            order.status = 'delivery';
                        } else {
                            order.status = 'ready';
                        }
                        order.statusChanged = now;
                    } else if (order.status === 'delivery' && timeSinceCreation > fifteenMinutesInMs) {
                        order.status = 'ready';
                        order.statusChanged = now;
                    }
                }
            });

            saveOrdersToStorage();
            renderOrders();
        }

        // Функция удаления заказа
        function deleteOrder(orderId) {
            if (confirm('Вы уверены, что хотите удалить этот заказ?')) {
                const orderIndex = orders.findIndex(order => order.id === orderId);
                if (orderIndex !== -1) {
                    orders.splice(orderIndex, 1);
                    saveOrdersToStorage();
                    renderOrders();
                }
            }
        }

        function renderOrders() {
            // Показываем только заказы текущего пользователя
            const userOrders = orders.filter(order => order.userId === userId);

            if (userOrders.length === 0) {
                ordersContainer.innerHTML = '<p class="no-orders">У вас еще нет заказов</p>';
                return;
            }

            ordersContainer.innerHTML = '';

            userOrders.forEach(order => {
                const orderCard = document.createElement('div');
                orderCard.className = 'order-card';

                // Добавляем класс completed для полученных заказов
                if (order.status === 'completed') {
                    orderCard.classList.add('completed');
                }

                let itemsHtml = '';
                order.items.forEach(item => {
                    itemsHtml += `
                        <div class="order-item">
                            <div>
                                <div class="order-item-name">${item.name} x${item.quantity}</div>
                            </div>
                            <div class="item-total">${item.price * item.quantity} ₽</div>
                        </div>
                    `;
                });

                // Определяем, нужно ли показывать QR-код и кнопку
                // Для заказов с доставкой показываем кнопку "Уже забрал" при статусе "ready"
                const showQrCode = order.status === 'ready' && order.deliveryType === 'pickup';
                const showReceivedBtn = order.status === 'ready' && order.status !== 'completed';
                const showDeleteBtn = order.status === 'completed';

                // Информация о бонусах
                let bonusInfo = '';
                if (order.bonusUsed) {
                    bonusInfo += `<div style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        <i class="fas fa-percent"></i> Использована бонусная карта (скидка 1 рубль)`;

                    if (order.bonusEarned > 0) {
                        bonusInfo += `<br><i class="fas fa-gift"></i> Начислено бонусов: ${order.bonusEarned}`;
                    }

                    if (order.bonusSpent > 0) {
                        bonusInfo += `<br><i class="fas fa-coins"></i> Списано бонусов: ${order.bonusSpent}`;
                    } else if (bonusCard && bonusCard.firstUse) {
                        bonusInfo += `<br><i class="fas fa-star"></i> Первое использование карты - бонусы не списываются`;
                    }

                    bonusInfo += `</div>`;
                }

                orderCard.innerHTML = `
                    <div class="order-header">
                        <div>
                            <div class="order-number">Заказ ${order.id}</div>
                            <div class="order-date">${order.date}</div>
                        </div>
                        <div class="order-status ${getStatusClass(order.status)}">${getStatusText(order.status)}</div>
                    </div>
                    <div class="order-items">
                        ${itemsHtml}
                    </div>
                    ${bonusInfo}
                    <div class="order-footer">
                        <div class="order-total">Итого: ${order.total} ₽</div>
                        <div class="order-type">${order.deliveryType === 'delivery' ? 'Доставка' : 'Самовывоз'}</div>
                    </div>
                    ${showQrCode && order.status !== 'completed' ? `
                    <div class="qr-code-container show">
                        <div class="qr-code-title">QR-код для получения заказа:</div>
                        <img src="img/img/qr-code.png" alt="QR-код заказа ${order.id}" class="qr-code-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmNjZDk3Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzVjM2QxZSI+UVItQ09ERTwvdGV4dD48L3N2Zz4=';">
                    </div>
                    ` : ''}
                    ${showReceivedBtn && order.status !== 'completed' ? `
                    <div style="text-align: center; margin-top: 15px;">
                        <button class="received-btn" data-order-id="${order.id}">
                            ${order.deliveryType === 'delivery' ? 'Заказ получен' : 'Уже забрал'}
                        </button>
                    </div>
                    ` : ''}
                    ${showDeleteBtn ? `
                    <div style="text-align: center; margin-top: 15px;">
                        <button class="delete-order-btn" data-order-id="${order.id}">
                            <i class="fas fa-trash"></i> Удалить заказ
                        </button>
                    </div>
                    ` : ''}
                `;

                ordersContainer.appendChild(orderCard);

                // Добавляем обработчик для кнопки "Уже забрал" или "Заказ получен"
                if (showReceivedBtn && order.status !== 'completed') {
                    const receivedBtn = orderCard.querySelector('.received-btn');
                    if (receivedBtn) {
                        receivedBtn.addEventListener('click', function() {
                            const orderId = this.getAttribute('data-order-id');
                            openRatingModal(orderId);
                        });
                    }
                }

                // Добавляем обработчик для кнопки "Удалить заказ"
                if (showDeleteBtn) {
                    const deleteBtn = orderCard.querySelector('.delete-order-btn');
                    if (deleteBtn) {
                        deleteBtn.addEventListener('click', function() {
                            const orderId = this.getAttribute('data-order-id');
                            deleteOrder(orderId);
                        });
                    }
                }
            });
        }

        function saveOrdersToStorage() {
            localStorage.setItem('ahmedOrders', JSON.stringify(orders));
            localStorage.setItem('ahmedOrderNumber', orderNumber.toString());
            localStorage.setItem('ahmedUserId', userId);
        }

        function loadOrdersFromStorage() {
            const savedOrders = localStorage.getItem('ahmedOrders');
            const savedOrderNumber = localStorage.getItem('ahmedOrderNumber');

            if (savedOrders) {
                orders = JSON.parse(savedOrders);
                updateOrderStatuses();
                renderOrders();
            }

            if (savedOrderNumber) {
                orderNumber = parseInt(savedOrderNumber);
            }
        }

        // ========== ОТКРЫТИЕ/ЗАКРЫТИЕ ПАНЕЛИ ЗАКАЗОВ ==========
        function openOrdersPanel() {
            ordersOverlay.classList.add('active');
            ordersPanel.classList.add('active');
            document.body.style.overflow = 'hidden';
            updateOrderStatuses();
        }

        function closeOrdersPanel() {
            ordersOverlay.classList.remove('active');
            ordersPanel.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Обработчики для панели заказов
        if (closeOrders) {
            closeOrders.addEventListener('click', closeOrdersPanel);
        }
        ordersOverlay.addEventListener('click', closeOrdersPanel);

        // ========== ОСТАЛЬНЫЕ ФУНКЦИИ ==========

        // Функция для показа уведомления о добавлении в корзину
        function showCartNotification(itemName) {
            notificationMessage.textContent = `${itemName} добавлен в вашу корзину`;
            cartNotification.classList.add('show');

            setTimeout(() => {
                cartNotification.classList.remove('show');
            }, 3000);
        }

        // Функция для прокрутки к началу страницы
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Функция для отображения/скрытия кнопки "Наверх"
        function toggleScrollToTopButton() {
            if (window.scrollY > 300) {
                scrollToTopBtn.classList.add('visible');
            } else {
                scrollToTopBtn.classList.remove('visible');
            }
        }

        // Обработчик для кнопки "Наверх"
        scrollToTopBtn.addEventListener('click', scrollToTop);

        // Обработчик для отслеживания прокрутки
        window.addEventListener('scroll', toggleScrollToTopButton);

        // Инициализация меню
        function initializeMenu() {
            for (const category in menuData) {
                const grid = document.getElementById(`${category}Grid`);
                menuData[category].forEach(item => {
                    const menuItem = createMenuItem(item);
                    grid.appendChild(menuItem);
                });
            }
        }

        // Создание карточки товара с ФОТОГРАФИЕЙ (без состава)
        function createMenuItem(item) {
            const div = document.createElement('div');
            div.className = 'menu-item';

            const img = document.createElement('img');
            img.src = item.image;
            img.alt = item.name;
            img.loading = 'lazy';
            img.onerror = function() {
                this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmNjZDk3Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzVjM2QxZSI+U2hhc2hseWs8L3RleHQ+PC9zdmc+';
                this.alt = 'Изображение не загружено: ' + item.name;
            };

            div.innerHTML = `
                <div class="item-image">
                    <!-- Изображение будет добавлено через JavaScript -->
                </div>
                <div class="item-info">
                    <h3 class="item-name">${item.name}</h3>
                    <p class="item-description">${item.description}</p>
                    <div class="item-footer">
                        <div class="item-price">${item.price} ₽</div>
                        <button class="add-to-cart" data-id="${item.id}">Добавить в корзину</button>
                    </div>
                </div>
            `;

            div.querySelector('.item-image').appendChild(img);

            return div;
        }

        // Переключение категорий
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                const category = button.dataset.category;

                categoryButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                menuSections.forEach(section => section.classList.remove('active'));
                document.getElementById(category).classList.add('active');

                document.getElementById(category).scrollIntoView({ behavior: 'smooth' });
            });
        });

        // Кнопка в шапке (Меню) - теперь в раскрывающемся меню

        // Открытие/закрытие корзины
        cartIcon.addEventListener('click', openCart);
        closeCart.addEventListener('click', closeCartPanel);
        cartOverlay.addEventListener('click', closeCartPanel);

        function openCart() {
            cartOverlay.classList.add('active');
            cartPanel.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeCartPanel() {
            cartOverlay.classList.remove('active');
            cartPanel.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Закрытие всех окон клавишей Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (cartPanel.classList.contains('active')) {
                    closeCartPanel();
                }
                if (ordersPanel.classList.contains('active')) {
                    closeOrdersPanel();
                }
                if (bonusPanel.classList.contains('active')) {
                    closeBonusPanel();
                }
                if (ratingModalOverlay.classList.contains('active')) {
                    closeRatingModalFunc();
                }
                if (announcementPanel.classList.contains('active')) {
                    closeAnnouncementPanel();
                }
                if (hamburgerDropdown.classList.contains('active')) {
                    hamburgerDropdown.classList.remove('active');
                }
            }
        });

        // Обработка переключения способа доставки
        deliveryTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'delivery') {
                    deliveryAddressGroup.classList.add('visible');
                    deliveryAddressInput.setAttribute('required', 'required');
                } else {
                    deliveryAddressGroup.classList.remove('visible');
                    deliveryAddressInput.removeAttribute('required');
                }
            });
        });

        // Форма "Связаться с нами"
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const message = document.getElementById('contactMessage').value;

            if (!name || !email || !message) {
                alert('Пожалуйста, заполните все поля');
                return;
            }

            const mailtoLink = `mailto:mustafinamir10378@gmail.com?subject=Сообщение от ${encodeURIComponent(name)}&body=Имя: ${encodeURIComponent(name)}%0D%0AEmail: ${encodeURIComponent(email)}%0D%0A%0D%0AСообщение:%0D%0A${encodeURIComponent(message)}`;

            window.location.href = mailtoLink;

            contactForm.style.display = 'none';
            contactSuccess.style.display = 'block';

            setTimeout(() => {
                contactForm.reset();
                contactForm.style.display = 'block';
                contactSuccess.style.display = 'none';
            }, 5000);
        });

        // Добавление товара в корзину
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-to-cart')) {
                const itemId = parseInt(e.target.dataset.id);
                addToCart(itemId);
            }
        });

        // Добавление товара в корзину
        function addToCart(itemId) {
            let item = null;
            for (const category in menuData) {
                const found = menuData[category].find(i => i.id === itemId);
                if (found) {
                    item = found;
                    break;
                }
            }

            if (!item) return;

            const existingItem = cart.find(cartItem => cartItem.id === itemId);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...item,
                    quantity: 1
                });
            }

            updateCart();

            showCartNotification(item.name);

            const cartIconElement = document.querySelector('.cart-icon');
            cartIconElement.style.transform = 'scale(1.2)';
            setTimeout(() => {
                cartIconElement.style.transform = 'scale(1)';
            }, 200);
        }

        // Обновление корзины
        function updateCart() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;

            renderCartItems();

            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotalElement.textContent = `${totalPrice} ₽`;

            orderBtn.disabled = cart.length === 0;

            saveCartToStorage();
        }

        // Отображение товаров в корзине
        function renderCartItems() {
            if (cart.length === 0) {
                emptyCartMessage.style.display = 'block';
                cartItemsContainer.innerHTML = '';
                cartItemsContainer.appendChild(emptyCartMessage);
                return;
            }

            emptyCartMessage.style.display = 'none';

            cartItemsContainer.innerHTML = '';

            cart.forEach(item => {
                const cartItemElement = document.createElement('div');
                cartItemElement.className = 'cart-item';
                cartItemElement.innerHTML = `
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">${item.price} ₽</div>
                    </div>
                    <div class="cart-item-quantity">
                        <button class="quantity-btn decrease-btn" data-id="${item.id}">-</button>
                        <span class="quantity">${item.quantity}</span>
                        <button class="quantity-btn increase-btn" data-id="${item.id}">+</button>
                        <button class="remove-item" data-id="${item.id}"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItemElement);
            });

            document.querySelectorAll('.decrease-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const itemId = parseInt(btn.dataset.id);
                    updateCartItemQuantity(itemId, -1);
                });
            });

            document.querySelectorAll('.increase-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const itemId = parseInt(btn.dataset.id);
                    updateCartItemQuantity(itemId, 1);
                });
            });

            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', () => {
                    const itemId = parseInt(btn.dataset.id);
                    removeFromCart(itemId);
                });
            });
        }

        // Изменение количества товара в корзине
        function updateCartItemQuantity(itemId, change) {
            const itemIndex = cart.findIndex(item => item.id === itemId);

            if (itemIndex !== -1) {
                cart[itemIndex].quantity += change;

                if (cart[itemIndex].quantity <= 0) {
                    cart.splice(itemIndex, 1);
                }

                updateCart();
            }
        }

        // Удаление товара из корзины
        function removeFromCart(itemId) {
            const itemIndex = cart.findIndex(item => item.id === itemId);

            if (itemIndex !== -1) {
                cart.splice(itemIndex, 1);
                updateCart();
            }
        }

        // Сохранение корзины в localStorage
        function saveCartToStorage() {
            localStorage.setItem('ahmedCart', JSON.stringify(cart));
        }

        // Загрузка корзины из localStorage
        function loadCartFromStorage() {
            const savedCart = localStorage.getItem('ahmedCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCart();
            }
        }

        // Открытие модального окна заказа
        orderBtn.addEventListener('click', () => {
            if (cart.length > 0) {
                closeCartPanel();

                setTimeout(() => {
                    orderModal.classList.add('active');
                    document.body.style.overflow = 'hidden';

                    orderForm.reset();
                    orderForm.style.display = 'block';
                    orderSuccess.style.display = 'none';

                    deliveryAddressGroup.classList.remove('visible');
                    deliveryAddressInput.removeAttribute('required');

                    document.getElementById('pickup').checked = true;

                    // Сбрасываем чекбокс бонусной карты
                    useBonusCardInOrder.checked = false;
                    bonusCardButton.classList.remove('active');

                    // Обновляем отображение баланса
                    if (bonusCard) {
                        bonusBalanceDisplay.textContent = bonusCard.balance;
                        bonusCardButton.style.display = 'flex';
                        bonusBalanceInfo.style.display = 'flex';

                        // Проверяем минимальную сумму заказа
                        const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                        if (totalPrice < 500) {
                            bonusCardButton.classList.add('bonus-card-disabled');
                            bonusWarning.style.display = 'block';
                        } else {
                            bonusCardButton.classList.remove('bonus-card-disabled');
                            bonusWarning.style.display = 'none';
                        }
                    } else {
                        bonusCardButton.style.display = 'none';
                        bonusBalanceInfo.style.display = 'none';
                        bonusWarning.style.display = 'none';
                    }

                    // Скрываем информацию о бонусах в успешном заказе
                    bonusEarnedInfo.style.display = 'none';
                    bonusSpentInfo.style.display = 'none';
                }, 300);
            }
        });

        // Закрытие модального окна
        closeModal.addEventListener('click', () => {
            orderModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        // Закрытие модального окна при клике на overlay
        orderModal.addEventListener('click', (e) => {
            if (e.target === orderModal) {
                orderModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });

        // Оформление заказа
        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const name = document.getElementById('customerName').value;
            const email = document.getElementById('customerEmail').value;
            const deliveryType = document.querySelector('input[name="deliveryType"]:checked').value;
            const address = deliveryType === 'delivery' ? document.getElementById('customerAddress').value : null;
            const useBonus = useBonusCardInOrder.checked;

            if (!name || !email) {
                alert('Пожалуйста, заполните все обязательные поля');
                return;
            }

            if (deliveryType === 'delivery' && !address) {
                alert('Пожалуйста, укажите адрес доставки');
                return;
            }

            // Проверяем минимальную сумму заказа для использования бонусной карты
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            if (useBonus && totalPrice < 500) {
                alert('Бонусную карту можно использовать только в заказах от 500 рублей');
                return;
            }

            const newOrder = createOrder(
                { name, email },
                cart,
                deliveryType,
                address,
                useBonus
            );

            const newOrderNumber = newOrder.id;
            orderNumberElement.textContent = newOrderNumber;

            // Показываем информацию о начисленных и списанных бонусах
            if (newOrder.bonusUsed) {
                if (newOrder.bonusEarned > 0) {
                    bonusEarned.textContent = newOrder.bonusEarned;
                    bonusEarnedInfo.style.display = 'block';
                }

                if (newOrder.bonusSpent > 0) {
                    bonusSpent.textContent = newOrder.bonusSpent;
                    bonusSpentInfo.style.display = 'block';
                } else if (bonusCard && bonusCard.firstUse === false) {
                    // Если это было первое использование, но бонусы не списывались
                    bonusSpentInfo.style.display = 'none';
                }
            }

            orderForm.style.display = 'none';
            orderSuccess.style.display = 'block';

            setTimeout(() => {
                cart = [];
                updateCart();

                setTimeout(() => {
                    orderModal.classList.remove('active');
                    document.body.style.overflow = 'auto';

                    openOrdersPanel();
                }, 3000);
            }, 1500);
        });

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            initializeCarousel();
            initializeMenu();
            loadCartFromStorage();
            loadOrdersFromStorage();
            loadBonusCardFromStorage(); // Загружаем бонусную карту
            toggleScrollToTopButton();
            initRatingStars(); // Инициализируем звезды рейтинга
            updateBonusDisplay(); // Обновляем отображение бонусной карты

            // Обновляем статусы заказов каждую минуту
            setInterval(updateOrderStatuses, 60000);
        });
    </script>
</body>
</html>
