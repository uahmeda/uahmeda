<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>У Ахмеда</title>
    <link rel="icon" type="image/png" href="img/img/favicon.png">
    <!-- Подключаем Google Fonts с рукописным шрифтом -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ========== ЗАГРУЗОЧНЫЙ ЭКРАН ========== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-gif {
            width: 200px;
            height: 200px;
            object-fit: contain;
        }

        /* ========== POP-UP ОКНО ========== */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .popup-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .popup-container {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            width: auto;
            height: auto;
        }

        .popup-image {
            width: 100%;
            height: auto;
            max-width: 500px; /* УВЕЛИЧИЛИ РАЗМЕР */
            max-height: 500px; /* УВЕЛИЧИЛИ РАЗМЕР */
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .popup-image:hover {
            transform: scale(1.02);
        }

        .close-popup {
            position: absolute;
            top: -20px; /* УВЕЛИЧИЛИ ОТСТУП */
            right: -20px; /* УВЕЛИЧИЛИ ОТСТУП */
            width: 45px; /* УВЕЛИЧИЛИ КНОПКУ */
            height: 45px; /* УВЕЛИЧИЛИ КНОПКУ */
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem; /* УВЕЛИЧИЛИ ШРИФТ */
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s ease;
            border: none;
            z-index: 10;
        }

        .close-popup:hover {
            background-color: var(--main-color);
        }

        /* Адаптивность для поп-апа */
        @media (max-width: 768px) {
            .popup-image {
                max-width: 350px; /* АДАПТИВНЫЙ РАЗМЕР */
                max-height: 350px; /* АДАПТИВНЫЙ РАЗМЕР */
            }
            
            .close-popup {
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
                top: -15px;
                right: -15px;
            }
        }

        @media (max-width: 480px) {
            .popup-image {
                max-width: 280px; /* АДАПТИВНЫЙ РАЗМЕР */
                max-height: 280px; /* АДАПТИВНЫЙ РАЗМЕР */
            }
            
            .close-popup {
                width: 35px;
                height: 35px;
                font-size: 1.3rem;
                top: -12px;
                right: -12px;
            }
        }

        /* ========== ВЫЕЗЖАЮЩАЯ ПАНЕЛЬ ЗАКАЗОВ (КАК КОРЗИНА) ========== */
        .orders-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .orders-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .orders-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 85vh;
            max-height: 85vh;
            background-color: white;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.4s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .orders-panel.active {
            transform: translateY(0);
        }

        .orders-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            background-color: var(--main-color);
            border-bottom: 2px solid var(--dark-color);
        }

        .orders-header h2 {
            color: var(--dark-color);
            font-size: 2.2rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
            margin: 0;
        }

        .close-orders {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            padding: 5px;
        }

        .orders-content {
            flex: 1;
            overflow-y: auto;
            padding: 0 25px;
        }

        .orders-container {
            padding: 20px 0;
        }

        .order-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .order-card:hover {
            transform: translateY(-3px);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .order-number {
            font-weight: 700;
            color: var(--dark-color);
            font-size: 1.2rem;
        }

        .order-date {
            color: #666;
            font-size: 0.9rem;
        }

        .order-status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .status-ordered {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-cooking {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .status-delivery {
            background-color: #d4edda;
            color: #155724;
        }

        .status-ready {
            background-color: #cce5ff;
            color: #004085;
        }

        .order-items {
            margin-bottom: 15px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px dashed #eee;
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .item-composition {
            color: #666;
            font-size: 0.9rem;
            font-style: italic;
        }

        .item-total {
            font-weight: 600;
        }

        .order-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .order-total {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark-color);
        }

        .order-type {
            color: #666;
            font-size: 0.9rem;
        }

        .no-orders {
            text-align: center;
            padding: 50px 20px;
            color: #666;
            font-size: 1.2rem;
        }

        /* СТИЛИ ДЛЯ QR-КОДА */
        .qr-code-container {
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #eee;
            display: none; /* По умолчанию скрыт */
        }

        .qr-code-container.show {
            display: block; /* Показываем только когда нужно */
        }

        .qr-code-title {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .qr-code-image {
            width: 150px;
            height: 150px;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin: 0 auto;
            display: block;
        }

        /* ========== ОСНОВНЫЕ СТИЛИ ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --main-color: #fccd97;
            --dark-color: #5c3d1e;
            --light-color: #fff9f0;
            --text-color: #333;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --handwritten-font: 'Caveat', cursive; /* РУКОПИСНЫЙ ШРИФТ */
        }

        body {
            background-color: #fefefe;
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Шапка сайта */
        header {
            background-color: var(--main-color);
            padding: 10px 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-image {
            height: 60px;
            width: 60px;
            background-color: var(--dark-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .logo-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .logo-text {
            display: block;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            color: var(--dark-color);
        }

        .logo-text p {
            font-size: 0.8rem;
            color: var(--text-color);
            font-style: italic;
        }

        .header-buttons {
            display: flex;
            gap: 15px;
        }

        .header-btn {
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }

        .header-btn:hover {
            background-color: #7a4f29;
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--dark-color);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--dark-color);
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* КАРУСЕЛЬ БАННЕРОВ */
        .banner-carousel {
            width: 100%;
            position: relative;
            overflow: hidden;
            background-color: white;
            height: 50vh;
            min-height: 300px;
            max-height: 500px;
            margin: 0;
            margin-bottom: 40px;
        }

        .carousel-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            overflow: hidden;
        }

        .carousel-track {
            display: flex;
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }

        .carousel-slide {
            min-width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .carousel-slide img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        /* Основной контент */
        main {
            padding: 0 0 50px;
        }

        /* Блок "О нашем заведении" */
        .about-section {
            background-color: var(--main-color);
            padding: 40px 30px;
            border-radius: 10px;
            margin-bottom: 40px;
            box-shadow: var(--shadow);
        }

        .about-section h2 {
            color: var(--dark-color);
            margin-bottom: 20px;
            text-align: center;
            font-size: 2.5rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .about-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Блок "Почему выбирают нас?" */
        .features-section {
            margin-bottom: 40px;
        }

        .features-section h2 {
            color: var(--dark-color);
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.5rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }

        .feature-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--dark-color);
            margin-bottom: 15px;
        }

        .feature-card h3 {
            color: var(--dark-color);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        /* Блок "Отзывы" */
        .reviews-section {
            margin-bottom: 40px;
        }

        .reviews-section h2 {
            color: var(--dark-color);
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.5rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .review-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .review-name {
            font-weight: 700;
            color: var(--dark-color);
            font-size: 1.1rem;
        }

        .review-rating {
            color: #ffc107;
            font-size: 1.1rem;
        }

        .review-text {
            font-style: italic;
            line-height: 1.6;
        }

        .bad-review {
            border: 2px solid #ff6b6b;
            background-color: #fff5f5;
        }

        /* Заголовок меню */
        .menu-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .menu-header h2 {
            color: var(--dark-color);
            font-size: 3rem;
            margin-bottom: 15px;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .menu-header p {
            color: #666;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .categories {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .category-btn {
            background-color: white;
            border: 2px solid var(--main-color);
            color: var(--dark-color);
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-btn:hover {
            background-color: var(--main-color);
        }

        .category-btn.active {
            background-color: var(--main-color);
            color: var(--dark-color);
            transform: scale(1.05);
        }

        .menu-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .menu-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .section-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--dark-color);
            font-size: 2.2rem;
            position: relative;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .section-title:after {
            content: '';
            display: block;
            width: 100px;
            height: 3px;
            background-color: var(--main-color);
            margin: 10px auto;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        /* Карточки товаров */
        .menu-item {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .menu-item:hover {
            transform: translateY(-5px);
        }

        .item-image {
            height: 200px;
            overflow: hidden;
            position: relative;
            background-color: var(--main-color);
        }

        .item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            display: block;
        }

        .menu-item:hover .item-image img {
            transform: scale(1.05);
        }

        .item-info {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .item-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .item-description {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.95rem;
            flex-grow: 1;
        }

        .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .item-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark-color);
        }

        .add-to-cart {
            background-color: var(--main-color);
            color: var(--dark-color);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }

        .add-to-cart:hover {
            background-color: #f5bf7d;
        }

        /* Блок "Связаться с нами" */
        .contact-section {
            background-color: var(--main-color);
            padding: 40px 30px;
            border-radius: 10px;
            margin-top: 40px;
            margin-bottom: 40px;
            box-shadow: var(--shadow);
        }

        .contact-section h2 {
            color: var(--dark-color);
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.5rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--dark-color);
        }

        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }

        .submit-btn {
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: block;
            width: 100%;
        }

        .submit-btn:hover {
            background-color: #7a4f29;
        }

        /* КНОПКА "НАВЕРХ" В ПРАВОМ НИЖНЕМ УГЛУ */
        .scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: var(--dark-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .scroll-to-top:hover {
            background-color: #7a4f29;
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
        }

        .scroll-to-top:active {
            transform: translateY(0);
        }

        /* ВСПЛЫВАЮЩЕЕ УВЕДОМЛЕНИЕ ПРИ ДОБАВЛЕНИИ В КОРЗИНУ */
        .cart-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--dark-color);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 2000;
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(120%);
            transition: transform 0.4s ease;
            max-width: 350px;
        }

        .cart-notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            font-size: 1.5rem;
            color: var(--main-color);
        }

        .notification-content h4 {
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .notification-content p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ВЫЕЗЖАЮЩАЯ КОРЗИНА СНИЗУ */
        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .cart-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .cart-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 85vh;
            max-height: 85vh;
            background-color: white;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.4s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .cart-panel.active {
            transform: translateY(0);
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            background-color: var(--main-color);
            border-bottom: 2px solid var(--dark-color);
        }

        .cart-header h2 {
            color: var(--dark-color);
            font-size: 2.2rem;
            font-family: var(--handwritten-font);
            font-weight: 700;
            margin: 0;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            padding: 5px;
        }

        .cart-content {
            flex: 1;
            overflow-y: auto;
            padding: 0 25px;
        }

        .cart-items {
            padding: 20px 0;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-info {
            flex-grow: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--dark-color);
            font-weight: 700;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            background-color: var(--main-color);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .quantity-btn:hover {
            background-color: #f5bf7d;
        }

        .quantity {
            font-weight: 600;
            min-width: 25px;
            text-align: center;
        }

        .remove-item {
            background-color: transparent;
            border: none;
            color: #ff6b6b;
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: 15px;
            padding: 5px;
        }

        .cart-footer {
            padding: 20px 25px;
            border-top: 2px solid var(--main-color);
            background-color: white;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-color);
        }

        .order-btn {
            display: block;
            width: 100%;
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 18px;
            font-size: 1.3rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .order-btn:hover:not(:disabled) {
            background-color: #7a4f29;
            transform: translateY(-2px);
        }

        .order-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .empty-cart-message {
            text-align: center;
            padding: 50px 20px;
            color: #666;
            font-size: 1.2rem;
        }

        /* Модальное окно оформления заказа */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background-color: white;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 1.8rem;
            color: var(--dark-color);
            font-family: var(--handwritten-font);
            font-weight: 700;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .delivery-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .delivery-option {
            flex: 1;
            text-align: center;
        }

        .delivery-option input {
            display: none;
        }

        .delivery-option label {
            display: block;
            padding: 12px;
            background-color: #f5f5f5;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .delivery-option input:checked + label {
            background-color: var(--main-color);
            border-color: var(--dark-color);
            font-weight: 600;
        }

        .delivery-address-group {
            display: none;
        }

        .delivery-address-group.visible {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .submit-order {
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }

        .submit-order:hover {
            background-color: #7a4f29;
        }

        .order-success {
            text-align: center;
            padding: 20px 0;
        }

        .order-success i {
            font-size: 4rem;
            color: #4caf50;
            margin-bottom: 20px;
        }

        .order-success h3 {
            color: var(--dark-color);
            margin-bottom: 15px;
            font-family: var(--handwritten-font);
            font-size: 2rem;
            font-weight: 700;
        }

        /* Футер */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0 30px;
            text-align: center;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .footer-logo-container {
            margin-bottom: 20px;
        }

        .footer-logo {
            height: 80px;
            width: 80px;
            background-color: var(--main-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin: 0 auto 15px;
        }

        .footer-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .footer-info {
            margin-bottom: 20px;
        }

        .footer-info p {
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .footer-email {
            color: var(--main-color);
            font-weight: 600;
        }

        .footer-disclaimer {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            max-width: 800px;
            line-height: 1.5;
        }

        /* Адаптивность для мобильных */
        @media (max-width: 768px) {
            .loading-gif {
                width: 150px;
                height: 150px;
            }
            
            .banner-carousel {
                height: 40vh;
                min-height: 250px;
                max-height: 350px;
            }
            
            header {
                padding: 8px 0;
            }
            
            .header-content {
                justify-content: space-between;
                gap: 10px;
            }
            
            .logo-text {
                display: none;
            }
            
            .logo-image {
                height: 50px;
                width: 50px;
                font-size: 1.5rem;
                margin: 0 auto;
            }
            
            .header-buttons {
                gap: 10px;
            }
            
            .header-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .cart-icon {
                font-size: 1.3rem;
            }
            
            .cart-count {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
                top: -6px;
                right: -6px;
            }

            .scroll-to-top {
                bottom: 20px;
                right: 20px;
                width: 55px;
                height: 55px;
                font-size: 1.6rem;
            }

            .cart-notification {
                top: 15px;
                right: 15px;
                left: 15px;
                max-width: none;
            }

            .menu-header h2 {
                font-size: 2.5rem;
            }
            
            .about-section h2,
            .features-section h2,
            .reviews-section h2,
            .contact-section h2 {
                font-size: 2.2rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .categories {
                flex-direction: column;
                align-items: center;
            }
            
            .category-btn {
                width: 200px;
            }
            
            .features-grid, .reviews-grid, .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .cart-panel,
            .orders-panel {
                height: 80vh;
                max-height: 80vh;
            }
            
            .cart-header h2,
            .orders-header h2 {
                font-size: 1.8rem;
            }
            
            .modal {
                width: 95%;
                padding: 20px;
            }
            
            .delivery-options {
                flex-direction: column;
            }
            
            .about-section, .contact-section {
                padding: 30px 20px;
            }
            
            .qr-code-image {
                width: 120px;
                height: 120px;
            }
            
            .logo {
                flex: 1;
                justify-content: center;
            }
            
            .header-buttons {
                flex: 1;
                justify-content: flex-start;
            }
            
            .cart-icon {
                flex: 1;
                text-align: right;
            }
            
            .footer-disclaimer {
                font-size: 0.85rem;
                padding: 15px 10px 0;
            }
        }

        @media (max-width: 480px) {
            .loading-gif {
                width: 120px;
                height: 120px;
            }
            
            .banner-carousel {
                height: 35vh;
                min-height: 200px;
                max-height: 280px;
            }
            
            .menu-grid, .features-grid, .reviews-grid {
                grid-template-columns: 1fr;
            }
            
            .item-image {
                height: 180px;
            }
            
            .logo-image {
                height: 45px;
                width: 45px;
                font-size: 1.3rem;
            }
            
            .header-btn {
                padding: 7px 12px;
                font-size: 0.8rem;
            }
            
            .menu-header h2 {
                font-size: 2rem;
            }
            
            .about-section h2,
            .features-section h2,
            .reviews-section h2,
            .contact-section h2 {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.6rem;
            }
            
            .footer-logo {
                height: 70px;
                width: 70px;
                font-size: 1.8rem;
            }
            
            .cart-panel,
            .orders-panel {
                height: 75vh;
                max-height: 75vh;
            }
            
            .cart-header,
            .orders-header {
                padding: 15px 20px;
            }
            
            .cart-content,
            .orders-content {
                padding: 0 20px;
            }
            
            .cart-footer {
                padding: 15px 20px;
            }
            
            .cart-header h2,
            .orders-header h2 {
                font-size: 1.6rem;
            }
            
            .cart-notification {
                padding: 12px 20px;
            }
            
            .notification-icon {
                font-size: 1.3rem;
            }
            
            .notification-content h4 {
                font-size: 1rem;
            }
            
            .notification-content p {
                font-size: 0.85rem;
            }
            
            .scroll-to-top {
                bottom: 15px;
                right: 15px;
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }
            
            .qr-code-image {
                width: 100px;
                height: 100px;
            }
        }
        
        @media (max-width: 360px) {
            .loading-gif {
                width: 100px;
                height: 100px;
            }
            
            .banner-carousel {
                height: 30vh;
                min-height: 180px;
                max-height: 230px;
            }
            
            .header-buttons {
                gap: 5px;
            }
            
            .header-btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .cart-panel,
            .orders-panel {
                height: 70vh;
                max-height: 70vh;
            }
            
            .scroll-to-top {
                bottom: 10px;
                right: 10px;
                width: 45px;
                height: 45px;
                font-size: 1.3rem;
            }
            
            .qr-code-image {
                width: 90px;
                height: 90px;
            }
        }
        
        @media (max-height: 500px) and (orientation: landscape) {
            .loading-gif {
                width: 120px;
                height: 120px;
            }
            
            .banner-carousel {
                height: 70vh;
                min-height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- POP-UP ОКНО -->
    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-container">
            <button class="close-popup" id="closePopup">&times;</button>
            <a href="https://итд.com/uahmeda52" target="_blank" id="popupLink">
                <img src="img/img/popup.png" alt="Специальное предложение" class="popup-image" id="popupImage">
            </a>
        </div>
    </div>

    <!-- ЗАГРУЗОЧНЫЙ ЭКРАН -->
    <div class="loading-screen" id="loadingScreen">
        <img src="img/img/loading.gif" alt="Загрузка" class="loading-gif">
    </div>

    <!-- ВСПЛЫВАЮЩЕЕ УВЕДОМЛЕНИЕ ПРИ ДОБАВЛЕНИИ В КОРЗИНУ -->
    <div class="cart-notification" id="cartNotification">
        <div class="notification-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="notification-content">
            <h4>Товар добавлен в корзину</h4>
            <p id="notificationMessage">Шашлык из свинины добавлен в вашу корзину</p>
        </div>
    </div>

    <!-- КНОПКА "НАВЕРХ" В ПРАВОМ НИЖНЕМ УГЛУ -->
    <div class="scroll-to-top" id="scrollToTop">
        <i class="fas fa-chevron-up"></i>
    </div>

    <!-- Шапка сайта -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="header-buttons">
                    <!-- Кнопка Меню -->
                    <button class="header-btn" id="menuBtn">Меню</button>
                    <!-- КНОПКА "НЕДАВНИЕ ЗАКАЗЫ" -->
                    <button class="header-btn" id="ordersBtn">Недавние заказы</button>
                </div>
                
                <div class="logo">
                    <div class="logo-image">
                        <img src="img/img/logo-ng.png" alt="Логотип Шашлычной 'У Ахмеда'">
                    </div>
                    <div class="logo-text">
                        <h1>Шашлычная "У Ахмеда"</h1>
                        <p>Открой для себя мир протухшего шашлыка</p>
                    </div>
                </div>
                
                <div class="cart-icon" id="cartIcon">
                    <i class="fas fa-shopping-cart"></i>
                    <div class="cart-count">0</div>
                </div>
            </div>
        </div>
    </header>

    <!-- КАРУСЕЛЬ БАННЕРОВ -->
    <section class="banner-carousel">
        <div class="carousel-container" id="carouselContainer">
            <div class="carousel-track" id="carouselTrack">
                <div class="carousel-slide">
                    <img src="img/img/banner1.png" alt="Баннер 1 - Акции и скидки" loading="lazy">
                </div>
                <div class="carousel-slide">
                    <img src="img/img/banner2.png" alt="Баннер 2 - Новые блюда" loading="lazy">
                </div>
                <!-- ТРЕТИЙ БАННЕР ДОБАВЛЕН -->
                <div class="carousel-slide">
                    <img src="img/img/banner3.png" alt="Баннер 3 - Специальное предложение" loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- Основное содержимое -->
    <main class="container">
        <!-- Блок "О нашем заведении" (переименован) -->
        <section class="about-section">
            <h2>О нашем заведении</h2>
            <p>Срухаланцы приходят в нашу шашлычную, чтобы насладиться вкусом нашего ароматного шашлыка, а уют заведения не дает им покинуть его. У нас самый лучший шашлык по мнению губернатора Срухаланска Пихоря Пижонова. Клиенты еще никогда не были разочарованы шашлычной «У Ахмеда!»</p>
        </section>

        <!-- Блок "Почему выбирают нас?" -->
        <section class="features-section">
            <h2>Почему выбирают нас?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-skull-crossbones"></i>
                    </div>
                    <h3>Убогое качество, но вкусные блюда</h3>
                    <p>Внешний вид не главное, главное - это неповторимый вкус!</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <h3>Неопытные повара</h3>
                    <p>Наши повара постоянно экспериментируют, чтобы удивить вас!</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <h3>Долгая готовка и доставка</h3>
                    <p>Мы не торопимся, чтобы всё было идеально приготовлено</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <h3>Космические цены</h3>
                    <p>За качество такого уровня нужно платить соответственно!</p>
                </div>
            </div>
        </section>

        <!-- Блок "Отзывы" -->
        <section class="reviews-section">
            <h2>Отзывы</h2>
            <div class="reviews-grid">
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Туманова Елена</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">Лучший ресторан, всегда сюда с коллегами захожу, а они тают от запаха.</div>
                </div>
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Пердато Сеньорита</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">Раньше думала что в этом Срухаланске все рестораны отстойные, но поменяла свое мнение после того как поела здесь! Лучше чем у меня на родине!</div>
                </div>
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Ахмедов Абдулла</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">Братья маладцы, никогда мимо не проезжаю, все невераятна вкусна.</div>
                </div>
                <!-- НОВЫЙ ОТЗЫВ 1 -->
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Минова Амина</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">Сайт просто супер! Большой выбор товара. Качество топ. Отравилась за секунду! Все довольны хочу организовать свадьбу под названием "LoveУшкА"</div>
                </div>
                <!-- НОВЫЙ ОТЗЫВ 2 -->
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-name">Апельсинова Айгуль</div>
                        <div class="review-rating">★★★★★</div>
                    </div>
                    <div class="review-text">шашлык прекрасный, дали с плесенью😊</div>
                </div>
                <div class="review-card bad-review">
                    <div class="review-header">
                        <div class="review-name">Коноплёва Жанна</div>
                        <div class="review-rating">★☆☆☆☆</div>
                    </div>
                    <div class="review-text">Ужас, как будто навоз сожрала, в туалете все вырагала так ещё и в углу нашла тону тараканов.</div>
                </div>
            </div>
        </section>

        <!-- Заголовок меню -->
        <section class="menu-header">
            <h2>Меню</h2>
            <p>Выберите категорию и наслаждайтесь нашими лучшими блюдами</p>
        </section>

        <!-- Категории меню -->
        <div class="categories">
            <button class="category-btn active" data-category="shashlik">Шашлык</button>
            <button class="category-btn" data-category="sauces">Соусы</button>
            <button class="category-btn" data-category="drinks">Напитки</button>
        </div>

        <!-- Секция меню с шашлыками -->
        <section id="shashlik" class="menu-section active">
            <h2 class="section-title">Шашлык</h2>
            <div class="menu-grid" id="shashlikGrid">
                <!-- Товары будут добавлены через JavaScript -->
            </div>
        </section>

        <!-- Секция меню с соусами -->
        <section id="sauces" class="menu-section">
            <h2 class="section-title">Соусы</h2>
            <div class="menu-grid" id="saucesGrid">
                <!-- Товары будут добавлены через JavaScript -->
            </div>
        </section>

        <!-- Секция меню с напитками -->
        <section id="drinks" class="menu-section">
            <h2 class="section-title">Напитки</h2>
            <div class="menu-grid" id="drinksGrid">
                <!-- Товары будут добавлены через JavaScript -->
            </div>
        </section>

        <!-- Блок "Связаться с нами" -->
        <section class="contact-section" id="contactSection">
            <h2>Связаться с нами</h2>
            <div class="contact-form">
                <form id="contactForm">
                    <div class="form-group">
                        <label for="contactName">Ваше имя</label>
                        <input type="text" id="contactName" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="contactEmail">Электронная почта</label>
                        <input type="email" id="contactEmail" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="contactMessage">Текст сообщения</label>
                        <textarea id="contactMessage" class="form-control" required></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">Отправить сообщение</button>
                </form>
                <div class="contact-success" id="contactSuccess" style="display: none; text-align: center; padding: 20px; color: green;">
                    <i class="fas fa-check-circle" style="font-size: 3rem; margin-bottom: 15px;"></i>
                    <h3>Сообщение отправлено!</h3>
                    <p>Мы свяжемся с вами в ближайшее время.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- ВЫЕЗЖАЮЩАЯ КОРЗИНА СНИЗУ -->
    <div class="cart-overlay" id="cartOverlay"></div>
    <div class="cart-panel" id="cartPanel">
        <div class="cart-header">
            <h2>Корзина</h2>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-content">
            <div class="cart-items" id="cartItems">
                <p class="empty-cart-message" id="emptyCartMessage">Ваша корзина пуста</p>
            </div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Итого:</span>
                <span id="cartTotal">0 ₽</span>
            </div>
            <button class="order-btn" id="orderBtn" disabled>Оформить заказ</button>
        </div>
    </div>

    <!-- ВЫЕЗЖАЮЩАЯ ПАНЕЛЬ ЗАКАЗОВ СНИЗУ -->
    <div class="orders-overlay" id="ordersOverlay"></div>
    <div class="orders-panel" id="ordersPanel">
        <div class="orders-header">
            <h2>Недавние заказы</h2>
            <button class="close-orders" id="closeOrders">&times;</button>
        </div>
        <div class="orders-content">
            <div class="orders-container" id="ordersContainer">
                <!-- Заказы будут добавлены через JavaScript -->
            </div>
        </div>
    </div>

    <!-- Модальное окно оформления заказа -->
    <div class="modal-overlay" id="orderModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Оформление заказа</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-content">
                <form id="orderForm">
                    <div class="form-group">
                        <label for="customerName">Ваше имя</label>
                        <input type="text" id="customerName" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="customerEmail">Электронная почта</label>
                        <input type="email" id="customerEmail" class="form-control" required>
                    </div>
                    
                    <div class="delivery-options">
                        <div class="delivery-option">
                            <input type="radio" id="pickup" name="deliveryType" value="pickup" checked>
                            <label for="pickup">Забрать в ресторане</label>
                        </div>
                        <div class="delivery-option">
                            <input type="radio" id="delivery" name="deliveryType" value="delivery">
                            <label for="delivery">Доставить по адресу</label>
                        </div>
                    </div>
                    
                    <div class="form-group delivery-address-group" id="deliveryAddressGroup">
                        <label for="customerAddress">Адрес доставки</label>
                        <input type="text" id="customerAddress" class="form-control">
                    </div>
                    
                    <button type="submit" class="submit-order">Подтвердить заказ</button>
                </form>
                <div class="order-success" id="orderSuccess" style="display: none;">
                    <i class="fas fa-check-circle"></i>
                    <h3>Заказ успешно оформлен!</h3>
                    <p>Спасибо за ваш заказ. Подробности отправлены на вашу электронную почту.</p>
                    <p>Номер вашего заказа: <strong id="orderNumber">AHM-001</strong></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Футер -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo-container">
                    <div class="footer-logo">
                        <img src="img/img/logo.png" alt="Логотип Шашлычной 'У Ахмеда'">
                    </div>
                    <p style="font-size: 1.2rem; font-weight: 600;">Шашлычная "У Ахмеда"</p>
                </div>
                
                <div class="footer-info">
                    <p>г. Срухаланск, ул. Нахалова 32</p>
                    <p>Ежедневно с 10:00 до 23:00</p>
                    <p class="footer-email">uahmeda52@list.ru</p>
                </div>
                
                <div class="footer-disclaimer">
                    Сайт является шуточным и созданным в юмористических целях. Мы не предоставляем никаких услуг, а покупки невозможны.
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ========== УПРАВЛЕНИЕ ЗАГРУЗОЧНЫМ ЭКРАНОМ ==========
        const loadingScreen = document.getElementById('loadingScreen');
        
        // Показываем загрузочный экран 2 секунды, затем скрываем
        setTimeout(() => {
            loadingScreen.classList.add('hidden');
        }, 1000);

        // ========== POP-UP ОКНО ==========
        const popupOverlay = document.getElementById('popupOverlay');
        const closePopup = document.getElementById('closePopup');
        const popupImage = document.getElementById('popupImage');
        const popupLink = document.getElementById('popupLink');

        // Показ поп-апа через 3 секунды после загрузки страницы (ВСЕГДА ПОЯВЛЯЕТСЯ)
        function showPopup() {
            setTimeout(() => {
                popupOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }, 3000);
        }

        // Закрытие поп-апа
        function closePopupFunc() {
            popupOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Обработчики событий
        closePopup.addEventListener('click', function(e) {
            e.preventDefault();
            closePopupFunc();
        });

        // Закрытие поп-апа при клике на overlay (фон)
        popupOverlay.addEventListener('click', function(e) {
            if (e.target === popupOverlay) {
                closePopupFunc();
            }
        });

        // Обработка ошибки загрузки изображения
        popupImage.onerror = function() {
            // Если изображение не загрузилось, показываем заглушку
            this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwMCIgaGVpZ2h0PSIyMDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmY2NkOTciLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjQ4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNWMzZDFlIiBkeT0iLjNlbSI+U3BlY2lhbCBPZmZlcjwvdGV4dD48L3N2Zz4=';
            this.alt = 'Специальное предложение';
        };

        // Инициализация поп-апа
        function initPopup() {
            showPopup();
        }

        // ========== ОСТАЛЬНЫЙ КОД СКРИПТА ==========
        
        // Данные для карусели баннеров
        const bannerImages = [
            { src: 'img/banner1.png', alt: 'Баннер 1 - Акции и скидки' },
            { src: 'img/banner2.png', alt: 'Баннер 2 - Новые блюда' },
            { src: 'img/banner3.png', alt: 'Баннер 3 - Специальное предложение' }
        ];

        // Обновленные данные меню с составом блюд
        const menuData = {
            shashlik: [
                { 
                    id: 1, 
                    name: "Шашлык из свинины", 
                    description: "Нежные кусочки свинины, маринованные в специях", 
                    composition: "Свинина, лук, специи, растительное масло, уксус, соль, перец",
                    price: 350, 
                    image: "https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?w=600&h=400&fit=crop" 
                },
                { 
                    id: 2, 
                    name: "Шашлык из курицы", 
                    description: "Сочные куриные бедра на мангале", 
                    composition: "Куриное бедро, лук, чеснок, кефир, специи, соль, перец",
                    price: 280, 
                    image: "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=600&h=400&fit=crop" 
                },
                { 
                    id: 3, 
                    name: "Люля-кебаб из баранины", 
                    description: "Традиционный кавказский люля-кебаб", 
                    composition: "Баранина, лук, зира, кориандр, соль, перец, сало",
                    price: 420, 
                    image: "https://images.unsplash.com/photo-1529193591184-b1d58069ecdd?w=600&h=400&fit=crop" 
                },
                { 
                    id: 4, 
                    name: "Шашлык из говядины", 
                    description: "Пряная говядина на углях", 
                    composition: "Говядина, лук, вино, розмарин, тимьян, соль, перец",
                    price: 380, 
                    image: "https://images.unsplash.com/photo-1544025162-d76694265947?w=600&h=400&fit=crop" 
                },
                { 
                    id: 5, 
                    name: "Шашлык из семги", 
                    description: "Лосось на гриле с лимоном и травами", 
                    composition: "Семга, лимон, оливковое масло, укроп, соль, перец",
                    price: 550, 
                    image: "https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?w=600&h=400&fit=crop" 
                },
                { 
                    id: 6, 
                    name: "Овощи гриль", 
                    description: "Свежие овощи, приготовленные на мангале", 
                    composition: "Баклажаны, кабачки, болгарский перец, помидоры, масло, соль, специи",
                    price: 220, 
                    image: "https://images.unsplash.com/photo-1599921841143-1c12c0c6d1fe?w=600&h=400&fit=crop" 
                },
                // НОВЫЙ ТОВАР: Лаваш
                { 
                    id: 18, 
                    name: "Лаваш", 
                    description: "Свежий тонкий лаваш для шашлыка", 
                    composition: "Мука, вода, соль, дрожжи, растительное масло",
                    price: 80, 
                    image: "https://images.unsplash.com/photo-1641664734521-78b8c8f5e9b2?w=600&h=400&fit=crop" 
                }
            ],
            sauces: [
                { 
                    id: 16, 
                    name: "Сырный соус", 
                    description: "Ароматный сливочно-сырный соус с травами", 
                    composition: "Сметана, сыр, чеснок, укроп, петрушка, соль",
                    price: 95, 
                    image: "https://images.unsplash.com/photo-1563379926898-05f4575a45d8?w=600&h=400&fit=crop&auto=format" 
                },
                { 
                    id: 17, 
                    name: "Кетчуп домашний", 
                    description: "Натуральный томатный кетчуп с пряностями", 
                    composition: "Томаты, сахар, соль, уксус, специи, лук, чеснок",
                    price: 65, 
                    image: "https://images.unsplash.com/photo-1576193492451-bc6d703a5b3b?w=600&h=400&fit=crop&auto=format" 
                },
                // НОВЫЙ ТОВАР: Чесночный соус
                { 
                    id: 19, 
                    name: "Чесночный соус", 
                    description: "Ароматный соус на основе чеснока и сметаны", 
                    composition: "Сметана, чеснок, майонез, соль, зелень, лимонный сок",
                    price: 75, 
                    image: "https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=600&h=400&fit=crop" 
                }
            ],
            drinks: [
                { 
                    id: 11, 
                    name: "Лимонад домашний", 
                    description: "Освежающий лимонад с мятой и лимоном", 
                    composition: "Вода, лимон, сахар, мята, лед",
                    price: 120, 
                    image: "https://images.unsplash.com/photo-1621506289937-a8e4df240d0b?w=600&h=400&fit=crop" 
                },
                { 
                    id: 14, 
                    name: "Чай черный", 
                    description: "Ароматный черный чай с травами", 
                    composition: "Черный чай, вода, сахар по вкусу",
                    price: 70, 
                    image: "https://images.unsplash.com/photo-1568649929103-28ffbefaca1e?w=600&h=400&fit=crop&auto=format" 
                },
                { 
                    id: 15, 
                    name: "Кофе по-восточному", 
                    description: "Ароматный кофе с кардамоном", 
                    composition: "Кофе, кардамон, вода, сахар",
                    price: 150, 
                    image: "https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=600&h=400&fit=crop" 
                },
                { 
                    id: 20, 
                    name: "Чай с лимоном", 
                    description: "Ароматный чай с долькой лимона", 
                    composition: "Чай, лимон, вода, сахар",
                    price: 85, 
                    image: "https://images.unsplash.com/photo-1567337560842-9d2d11f9b1b7?w=600&h=400&fit=crop" 
                },
                { 
                    id: 21, 
                    name: "Зелёный чай", 
                    description: "Освежающий зеленый чай с жасмином", 
                    composition: "Зеленый чай, жасмин, вода, сахар",
                    price: 90, 
                    image: "https://images.unsplash.com/photo-1561047029-3000c68339ca?w=600&h=400&fit=crop" 
                }
            ]
        };

        // Корзина и заказы
        let cart = [];
        let orders = [];
        let orderNumber = 1;

        // Карусель
        let currentSlide = 0;
        let slideInterval;
        let isTransitioning = false;
        let touchStartX = 0;
        let touchEndX = 0;

        // DOM элементы для карусели
        const carouselTrack = document.getElementById('carouselTrack');
        const slides = document.querySelectorAll('.carousel-slide');
        const carouselContainer = document.getElementById('carouselContainer');

        // DOM элементы для остального
        const categoryButtons = document.querySelectorAll('.category-btn');
        const menuSections = document.querySelectorAll('.menu-section');
        const ordersBtn = document.getElementById('ordersBtn');
        const ordersOverlay = document.getElementById('ordersOverlay');
        const ordersPanel = document.getElementById('ordersPanel');
        const closeOrders = document.getElementById('closeOrders');
        const ordersContainer = document.getElementById('ordersContainer');
        const cartIcon = document.getElementById('cartIcon');
        const cartCount = document.querySelector('.cart-count');
        const cartItemsContainer = document.getElementById('cartItems');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        const cartTotalElement = document.getElementById('cartTotal');
        const orderBtn = document.getElementById('orderBtn');
        const orderModal = document.getElementById('orderModal');
        const closeModal = document.getElementById('closeModal');
        const orderForm = document.getElementById('orderForm');
        const orderSuccess = document.getElementById('orderSuccess');
        const orderNumberElement = document.getElementById('orderNumber');
        const deliveryTypeRadios = document.querySelectorAll('input[name="deliveryType"]');
        const deliveryAddressGroup = document.getElementById('deliveryAddressGroup');
        const deliveryAddressInput = document.getElementById('customerAddress');
        const menuBtn = document.getElementById('menuBtn');
        const contactForm = document.getElementById('contactForm');
        const contactSuccess = document.getElementById('contactSuccess');
        const cartOverlay = document.getElementById('cartOverlay');
        const cartPanel = document.getElementById('cartPanel');
        const closeCart = document.getElementById('closeCart');
        const cartNotification = document.getElementById('cartNotification');
        const notificationMessage = document.getElementById('notificationMessage');
        const scrollToTopBtn = document.getElementById('scrollToTop');

        // ========== ФУНКЦИИ КАРУСЕЛИ ==========
        function showSlide(index) {
            if (isTransitioning) return;
            
            isTransitioning = true;
            
            currentSlide = index;
            const offset = -currentSlide * 100;
            carouselTrack.style.transform = `translateX(${offset}%)`;
            
            setTimeout(() => {
                isTransitioning = false;
            }, 800);
        }

        function nextSlide() {
            let nextIndex = currentSlide + 1;
            
            if (nextIndex >= slides.length) {
                const firstSlide = slides[0].cloneNode(true);
                carouselTrack.appendChild(firstSlide);
                
                setTimeout(() => {
                    showSlide(currentSlide + 1);
                }, 50);
                
                setTimeout(() => {
                    slides[0].remove();
                    carouselTrack.style.transition = 'none';
                    carouselTrack.style.transform = `translateX(0)`;
                    currentSlide = 0;
                    
                    setTimeout(() => {
                        carouselTrack.style.transition = 'transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                    }, 50);
                }, 850);
            } else {
                showSlide(nextIndex);
            }
        }

        function startAutoSlide() {
            clearInterval(slideInterval);
            slideInterval = setInterval(nextSlide, 5000);
        }

        function stopAutoSlide() {
            clearInterval(slideInterval);
        }

        function handleTouchStart(e) {
            touchStartX = e.touches[0].clientX;
            stopAutoSlide();
        }

        function handleTouchMove(e) {
            touchEndX = e.touches[0].clientX;
        }

        function handleTouchEnd() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    nextSlide();
                }
            }
            
            startAutoSlide();
        }

        function handleImageError(img) {
            img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwMCIgaGVpZ2h0PSIxMDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmZmZmZmYiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjQ4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNWMzZDFlIiBkeT0iLjNlbSI+QmFubmVyPC90ZXh0Pjwvc3ZnPg==';
            img.alt = 'Баннер временно недоступен';
        }

        function initializeCarousel() {
            document.querySelectorAll('.carousel-slide img').forEach((img) => {
                img.onerror = function() {
                    handleImageError(this);
                };
            });
            
            carouselContainer.addEventListener('touchstart', handleTouchStart, false);
            carouselContainer.addEventListener('touchmove', handleTouchMove, false);
            carouselContainer.addEventListener('touchend', handleTouchEnd, false);
            
            let mouseDownX = 0;
            let mouseUpX = 0;
            
            carouselContainer.addEventListener('mousedown', function(e) {
                mouseDownX = e.clientX;
                stopAutoSlide();
            });
            
            carouselContainer.addEventListener('mouseup', function(e) {
                mouseUpX = e.clientX;
                const diff = mouseDownX - mouseUpX;
                const swipeThreshold = 50;
                
                if (Math.abs(diff) > swipeThreshold) {
                    if (diff > 0) {
                        nextSlide();
                    }
                }
                
                startAutoSlide();
            });
            
            carouselContainer.addEventListener('mouseenter', stopAutoSlide);
            carouselContainer.addEventListener('mouseleave', startAutoSlide);
            
            startAutoSlide();
        }

        // ========== ФУНКЦИИ ДЛЯ ЗАКАЗОВ ==========
        function createOrder(customerData, cartItems, deliveryType, address) {
            const order = {
                id: `AHM-${orderNumber.toString().padStart(3, '0')}`,
                date: new Date().toLocaleDateString('ru-RU'),
                customerName: customerData.name,
                customerEmail: customerData.email,
                items: cartItems.map(item => ({
                    name: item.name,
                    price: item.price,
                    quantity: item.quantity,
                    composition: item.composition || "Состав не указан"
                })),
                total: cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                deliveryType: deliveryType,
                address: address,
                status: 'ordered',
                statusChanged: new Date().getTime()
            };
            
            orderNumber++;
            orders.unshift(order); // Добавляем в начало массива
            saveOrdersToStorage();
            renderOrders();
            
            return order;
        }

        function getStatusText(status) {
            switch(status) {
                case 'ordered': return 'оформлен';
                case 'cooking': return 'готовка';
                case 'delivery': return 'доставка';
                case 'ready': return 'заказ ждет вас';
                default: return 'оформлен';
            }
        }

        function getStatusClass(status) {
            switch(status) {
                case 'ordered': return 'status-ordered';
                case 'cooking': return 'status-cooking';
                case 'delivery': return 'status-delivery';
                case 'ready': return 'status-ready';
                default: return 'status-ordered';
            }
        }

        function updateOrderStatuses() {
    const now = new Date().getTime();
    const minuteInMs = 60 * 1000;
    const oneMinuteInMs = 1 * minuteInMs;
    const threeMinutesInMs = 3 * minuteInMs;
    const fiveMinutesInMs = 5 * minuteInMs;
    
    orders.forEach(order => {
        const timeSinceCreation = now - order.statusChanged;
        
        if (order.status === 'ordered' && timeSinceCreation > oneMinuteInMs) {
            order.status = 'cooking';
            order.statusChanged = now;
        } else if (order.status === 'cooking' && timeSinceCreation > threeMinutesInMs) {
            if (order.deliveryType === 'delivery') {
                order.status = 'delivery';
            } else {
                order.status = 'ready';
            }
            order.statusChanged = now;
        } else if (order.status === 'delivery' && timeSinceCreation > fiveMinutesInMs) {
            order.status = 'ready';
            order.statusChanged = now;
        }
    });
    
    saveOrdersToStorage();
    renderOrders();
}

        function renderOrders() {
            if (orders.length === 0) {
                ordersContainer.innerHTML = '<p class="no-orders">У вас еще нет заказов</p>';
                return;
            }
            
            ordersContainer.innerHTML = '';
            
            orders.forEach(order => {
                const orderCard = document.createElement('div');
                orderCard.className = 'order-card';
                
                let itemsHtml = '';
                order.items.forEach(item => {
                    itemsHtml += `
                        <div class="order-item">
                            <div>
                                <div class="order-item-name">${item.name} x${item.quantity}</div>
                                <div class="item-composition">${item.composition}</div>
                            </div>
                            <div class="item-total">${item.price * item.quantity} ₽</div>
                        </div>
                    `;
                });
                
                // Определяем, нужно ли показывать QR-код
                const showQrCode = order.status === 'ready' && order.deliveryType === 'pickup';
                
                orderCard.innerHTML = `
                    <div class="order-header">
                        <div>
                            <div class="order-number">Заказ ${order.id}</div>
                            <div class="order-date">${order.date}</div>
                        </div>
                        <div class="order-status ${getStatusClass(order.status)}">${getStatusText(order.status)}</div>
                    </div>
                    <div class="order-items">
                        ${itemsHtml}
                    </div>
                    <div class="order-footer">
                        <div class="order-total">Итого: ${order.total} ₽</div>
                        <div class="order-type">${order.deliveryType === 'delivery' ? 'Доставка' : 'Самовывоз'}</div>
                    </div>
                    ${showQrCode ? `
                    <div class="qr-code-container show">
                        <div class="qr-code-title">QR-код для получения заказа:</div>
                        <img src="img/img/qr-code.png" alt="QR-код заказа ${order.id}" class="qr-code-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmNjZDk3Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzVjM2QxZSI+UVItQ09ERTwvdGV4dD48L3N2Zz4=';">
                    </div>
                    ` : ''}
                `;
                
                ordersContainer.appendChild(orderCard);
            });
        }

        function saveOrdersToStorage() {
            localStorage.setItem('ahmedOrders', JSON.stringify(orders));
            localStorage.setItem('ahmedOrderNumber', orderNumber.toString());
        }

        function loadOrdersFromStorage() {
            const savedOrders = localStorage.getItem('ahmedOrders');
            const savedOrderNumber = localStorage.getItem('ahmedOrderNumber');
            
            if (savedOrders) {
                orders = JSON.parse(savedOrders);
                updateOrderStatuses(); // Обновляем статусы при загрузке
                renderOrders();
            }
            
            if (savedOrderNumber) {
                orderNumber = parseInt(savedOrderNumber);
            }
        }

        // ========== ОТКРЫТИЕ/ЗАКРЫТИЕ ПАНЕЛИ ЗАКАЗОВ ==========
        function openOrdersPanel() {
            ordersOverlay.classList.add('active');
            ordersPanel.classList.add('active');
            document.body.style.overflow = 'hidden';
            // Обновляем статусы перед показом
            updateOrderStatuses();
        }

        function closeOrdersPanel() {
            ordersOverlay.classList.remove('active');
            ordersPanel.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Обработчики для панели заказов
        ordersBtn.addEventListener('click', openOrdersPanel);
        closeOrders.addEventListener('click', closeOrdersPanel);
        ordersOverlay.addEventListener('click', closeOrdersPanel);

        // Закрытие панели заказов клавишей Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && ordersPanel.classList.contains('active')) {
                closeOrdersPanel();
            }
        });

        // ========== ОСТАЛЬНЫЕ ФУНКЦИИ ==========

        // Функция для показа уведомления о добавлении в корзину
        function showCartNotification(itemName) {
            notificationMessage.textContent = `${itemName} добавлен в вашу корзину`;
            cartNotification.classList.add('show');
            
            setTimeout(() => {
                cartNotification.classList.remove('show');
            }, 3000);
        }

        // Функция для прокрутки к началу страницы
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Функция для отображения/скрытия кнопки "Наверх"
        function toggleScrollToTopButton() {
            if (window.scrollY > 300) {
                scrollToTopBtn.classList.add('visible');
            } else {
                scrollToTopBtn.classList.remove('visible');
            }
        }

        // Обработчик для кнопки "Наверх"
        scrollToTopBtn.addEventListener('click', scrollToTop);

        // Обработчик для отслеживания прокрутки
        window.addEventListener('scroll', toggleScrollToTopButton);

        // Инициализация меню
        function initializeMenu() {
            for (const category in menuData) {
                const grid = document.getElementById(`${category}Grid`);
                menuData[category].forEach(item => {
                    const menuItem = createMenuItem(item);
                    grid.appendChild(menuItem);
                });
            }
        }

        // Создание карточки товара с ФОТОГРАФИЕЙ
        function createMenuItem(item) {
            const div = document.createElement('div');
            div.className = 'menu-item';
            
            const img = document.createElement('img');
            img.src = item.image;
            img.alt = item.name;
            img.loading = 'lazy';
            img.onerror = function() {
                this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmNjZDk3Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzVjM2QxZSI+U2hhc2hseWs8L3RleHQ+PC9zdmc+';
                this.alt = 'Изображение не загружено: ' + item.name;
            };
            
            div.innerHTML = `
                <div class="item-image">
                    <!-- Изображение будет добавлено через JavaScript -->
                </div>
                <div class="item-info">
                    <h3 class="item-name">${item.name}</h3>
                    <p class="item-description">${item.description}</p>
                    <div class="item-composition" style="color: #888; font-size: 0.85rem; margin-bottom: 10px; font-style: italic;">${item.composition || "Состав не указан"}</div>
                    <div class="item-footer">
                        <div class="item-price">${item.price} ₽</div>
                        <button class="add-to-cart" data-id="${item.id}">Добавить в корзину</button>
                    </div>
                </div>
            `;
            
            div.querySelector('.item-image').appendChild(img);
            
            return div;
        }

        // Переключение категорий
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                const category = button.dataset.category;
                
                // Убираем активный класс у всех кнопок
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                // Добавляем активный класс текущей кнопке
                button.classList.add('active');
                
                // Скрываем все секции меню
                menuSections.forEach(section => section.classList.remove('active'));
                // Показываем выбранную секцию
                document.getElementById(category).classList.add('active');
                
                // Прокручиваем к меню
                document.getElementById(category).scrollIntoView({ behavior: 'smooth' });
            });
        });

        // Кнопка в шапке (Меню)
        menuBtn.addEventListener('click', () => {
            // Показываем меню
            document.querySelector('.menu-header').scrollIntoView({ behavior: 'smooth' });
        });

        // Открытие/закрытие корзины
        cartIcon.addEventListener('click', openCart);
        closeCart.addEventListener('click', closeCartPanel);
        cartOverlay.addEventListener('click', closeCartPanel);

        function openCart() {
            cartOverlay.classList.add('active');
            cartPanel.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeCartPanel() {
            cartOverlay.classList.remove('active');
            cartPanel.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Закрытие корзины клавишей Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (cartPanel.classList.contains('active')) {
                    closeCartPanel();
                }
                if (ordersPanel.classList.contains('active')) {
                    closeOrdersPanel();
                }
            }
        });

        // Обработка переключения способа доставки
        deliveryTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'delivery') {
                    deliveryAddressGroup.classList.add('visible');
                    deliveryAddressInput.setAttribute('required', 'required');
                } else {
                    deliveryAddressGroup.classList.remove('visible');
                    deliveryAddressInput.removeAttribute('required');
                }
            });
        });

        // Форма "Связаться с нами"
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const message = document.getElementById('contactMessage').value;
            
            if (!name || !email || !message) {
                alert('Пожалуйста, заполните все поля');
                return;
            }
            
            // Формируем тело письма
            const mailtoLink = `mailto:mustafinamir10378@gmail.com?subject=Сообщение от ${encodeURIComponent(name)}&body=Имя: ${encodeURIComponent(name)}%0D%0AEmail: ${encodeURIComponent(email)}%0D%0A%0D%0AСообщение:%0D%0A${encodeURIComponent(message)}`;
            
            // Открываем почтовый клиент
            window.location.href = mailtoLink;
            
            // Показываем сообщение об успешной отправке
            contactForm.style.display = 'none';
            contactSuccess.style.display = 'block';
            
            // Через 5 секунды показываем форму снова
            setTimeout(() => {
                contactForm.reset();
                contactForm.style.display = 'block';
                contactSuccess.style.display = 'none';
            }, 5000);
        });

        // Добавление товара в корзину
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-to-cart')) {
                const itemId = parseInt(e.target.dataset.id);
                addToCart(itemId);
            }
        });

        // Добавление товара в корзину
        function addToCart(itemId) {
            let item = null;
            for (const category in menuData) {
                const found = menuData[category].find(i => i.id === itemId);
                if (found) {
                    item = found;
                    break;
                }
            }
            
            if (!item) return;
            
            const existingItem = cart.find(cartItem => cartItem.id === itemId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...item,
                    quantity: 1
                });
            }
            
            updateCart();
            
            showCartNotification(item.name);
            
            const cartIconElement = document.querySelector('.cart-icon');
            cartIconElement.style.transform = 'scale(1.2)';
            setTimeout(() => {
                cartIconElement.style.transform = 'scale(1)';
            }, 200);
            
            if (!cartPanel.classList.contains('active')) {
                openCart();
            }
        }

        // Обновление корзины
        function updateCart() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            renderCartItems();
            
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotalElement.textContent = `${totalPrice} ₽`;
            
            orderBtn.disabled = cart.length === 0;
            
            saveCartToStorage();
        }

        // Отображение товаров в корзине
        function renderCartItems() {
            if (cart.length === 0) {
                emptyCartMessage.style.display = 'block';
                cartItemsContainer.innerHTML = '';
                cartItemsContainer.appendChild(emptyCartMessage);
                return;
            }
            
            emptyCartMessage.style.display = 'none';
            
            cartItemsContainer.innerHTML = '';
            
            cart.forEach(item => {
                const cartItemElement = document.createElement('div');
                cartItemElement.className = 'cart-item';
                cartItemElement.innerHTML = `
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">${item.price} ₽</div>
                    </div>
                    <div class="cart-item-quantity">
                        <button class="quantity-btn decrease-btn" data-id="${item.id}">-</button>
                        <span class="quantity">${item.quantity}</span>
                        <button class="quantity-btn increase-btn" data-id="${item.id}">+</button>
                        <button class="remove-item" data-id="${item.id}"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItemElement);
            });
            
            document.querySelectorAll('.decrease-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const itemId = parseInt(btn.dataset.id);
                    updateCartItemQuantity(itemId, -1);
                });
            });
            
            document.querySelectorAll('.increase-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const itemId = parseInt(btn.dataset.id);
                    updateCartItemQuantity(itemId, 1);
                });
            });
            
            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', () => {
                    const itemId = parseInt(btn.dataset.id);
                    removeFromCart(itemId);
                });
            });
        }

        // Изменение количества товара в корзине
        function updateCartItemQuantity(itemId, change) {
            const itemIndex = cart.findIndex(item => item.id === itemId);
            
            if (itemIndex !== -1) {
                cart[itemIndex].quantity += change;
                
                if (cart[itemIndex].quantity <= 0) {
                    cart.splice(itemIndex, 1);
                }
                
                updateCart();
            }
        }

        // Удаление товара из корзины
        function removeFromCart(itemId) {
            const itemIndex = cart.findIndex(item => item.id === itemId);
            
            if (itemIndex !== -1) {
                cart.splice(itemIndex, 1);
                updateCart();
            }
        }

        // Сохранение корзины в localStorage
        function saveCartToStorage() {
            localStorage.setItem('ahmedCart', JSON.stringify(cart));
        }

        // Загрузка корзины из localStorage
        function loadCartFromStorage() {
            const savedCart = localStorage.getItem('ahmedCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCart();
            }
        }

        // Открытие модального окна заказа
        orderBtn.addEventListener('click', () => {
            if (cart.length > 0) {
                closeCartPanel();
                
                setTimeout(() => {
                    orderModal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                    
                    orderForm.reset();
                    orderForm.style.display = 'block';
                    orderSuccess.style.display = 'none';
                    
                    deliveryAddressGroup.classList.remove('visible');
                    deliveryAddressInput.removeAttribute('required');
                    
                    document.getElementById('pickup').checked = true;
                }, 300);
            }
        });

        // Закрытие модального окна
        closeModal.addEventListener('click', () => {
            orderModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        // Закрытие модального окна при клике на overlay
        orderModal.addEventListener('click', (e) => {
            if (e.target === orderModal) {
                orderModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });

        // Оформление заказа
        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const name = document.getElementById('customerName').value;
            const email = document.getElementById('customerEmail').value;
            const deliveryType = document.querySelector('input[name="deliveryType"]:checked').value;
            const address = deliveryType === 'delivery' ? document.getElementById('customerAddress').value : null;
            
            if (!name || !email) {
                alert('Пожалуйста, заполните все обязательные поля');
                return;
            }
            
            if (deliveryType === 'delivery' && !address) {
                alert('Пожалуйста, укажите адрес доставки');
                return;
            }
            
            // Создаем заказ
            const newOrder = createOrder(
                { name, email },
                cart,
                deliveryType,
                address
            );
            
            const newOrderNumber = newOrder.id;
            orderNumberElement.textContent = newOrderNumber;
            
            orderForm.style.display = 'none';
            orderSuccess.style.display = 'block';
            
            // Очищаем корзину после заказа
            setTimeout(() => {
                cart = [];
                updateCart();
                
                // Закрываем модальное окно через 3 секунды
                setTimeout(() => {
                    orderModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                    
                    // Показываем панель заказов
                    openOrdersPanel();
                }, 3000);
            }, 1500);
        });

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            initializeCarousel();
            initializeMenu();
            loadCartFromStorage();
            loadOrdersFromStorage();
            toggleScrollToTopButton();
            initPopup();
        });
    </script>
</body>
</html>
